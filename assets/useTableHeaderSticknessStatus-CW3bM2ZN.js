import{_ as D}from"./FlexibleMenu.vue_vue_type_script_setup_true_lang-CXpDXAmR.js";import{_ as F}from"./BasePopup.vue_vue_type_script_setup_true_lang-Ci6Wsd6C.js";import{u as H}from"./usePopupInsideContainer-8s8n0Aqa.js";import{g as v,u as k,e as y,y as w,d as f,au as U,P as W,o as r,f as c,w as P,b as g,t as T,z as $,G as R,c as x,a as B,D as N,A as I,h as _,F as V,r as S,n as b,as as O,at as X,_ as j,x as G}from"./app-BJS3HRcf.js";import{a as Y,T as L,b as q,_ as J}from"./SearchResultSpan.vue_vue_type_script_setup_true_lang-DLEqZUCl.js";import{L as z,_ as E}from"./AppLink.vue_vue_type_script_setup_true_lang-D_VZ64dX.js";import{T as K}from"./TextButton-B1kOvmUg.js";import{_ as Q}from"./BaseTag.vue_vue_type_script_setup_true_lang-BOTD6icn.js";import{B as Z}from"./BaseInput-Cdvw5_5o.js";function ee(p){const t=v(()=>k(p)),o=v(()=>{var s;return(s=t.value)==null?void 0:s.popup}),e=y(),a=()=>{if(o.value){const s=o.value.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}},l=()=>{document.removeEventListener("mousemove",u,!1),e.value=void 0},n=()=>{document.addEventListener("mousemove",u,!1)},u=s=>{var d,h,C;if((d=t.value)!=null&&d.checkIsPointerOnPopup(s.clientX,s.clientY))return;const m=te(s,a());if(m===void 0){(h=t.value)==null||h.closePopup();return}if(!e.value){e.value=m;return}m>e.value?(C=t.value)==null||C.closePopup():e.value=m};return w(()=>{var s;return(s=t.value)==null?void 0:s.isShown},()=>{var s;((s=t.value)==null?void 0:s.isShown)===!1&&l()}),{startCheckIfPointerReachPopup:n}}function te(p,t){if(t!==void 0)return Math.pow(t.x-p.clientX,2)+Math.pow(t.y-p.clientY,2)}const le={class:"max-h-100 overflow-y-auto px-3 scrollbar-thin"},oe={name:"AppTableBaseTextPopup"},se=f({...oe,props:{text:{}},setup(p,{expose:t}){const o=y(),e=v(()=>{var i;return(i=o.value)==null?void 0:i.popup}),a={toTopFromPointerPx:12,translateXPercent:-50},l=(i,d)=>{var h,C;return(C=(h=o.value)==null?void 0:h.showPopup)==null?void 0:C.call(h,i,d)},n=i=>{var d,h;(h=(d=o.value)==null?void 0:d.showPopupElementEventHandler)==null||h.call(d,i,"top")},{shiftPopupIntoContainer:u}=H(e,void 0,a,!1,!0),{startCheckIfPointerReachPopup:s}=ee(o);return t({showPopup:l,showPopupElementEventHandler:n,closePopup:()=>{var i,d;return(d=(i=o.value)==null?void 0:i.closePopup)==null?void 0:d.call(i)},startCheckIfPointerReachPopup:s}),(i,d)=>{const h=U("tw-merge");return W((r(),c(F,$({ref_key:"popupRef",ref:o},a,{class:["text-size-6 whitespace-pre-line break-all text-left text-black-1","fixed max-w-106 rounded-md bg-white shadow-4","py-2"],"onPopup:open":k(u)}),{default:P(()=>[g("div",le,T(i.text),1)]),_:1},16,["onPopup:open"])),[[h]])}}}),ae={name:"AppTableCellTextPopup"},ne=f({...ae,props:{text:{}},setup(p,{expose:t}){const o=y(),e=n=>{var u,s;(s=(u=o.value)==null?void 0:u.showPopupElementEventHandler)==null||s.call(u,n)},a=()=>{var n,u;return(u=(n=o.value)==null?void 0:n.closePopup)==null?void 0:u.call(n)},l=v(()=>{var n;return(n=o.value)==null?void 0:n.startCheckIfPointerReachPopup});return t({showPopup:e,closePopup:a,startCheckIfPointerReachPopup:l}),(n,u)=>(r(),c(se,{ref_key:"popupRef",ref:o,text:n.text,class:"z-20"},null,8,["text"]))}}),ue={name:"AppTableCellWithOverflow"},re=f({...ue,props:{items:{},maxLines:{default:3},popupText:{}},setup(p){const t=p,o=y(t.items),e=y([]),a=y(),l=R(),n=y();return w(()=>t.items,()=>n.value.rerender(t.items)),(u,s)=>(r(),x(V,null,[g("div",$(k(l),{onMouseenter:s[2]||(s[2]=m=>{var i,d;return(d=(i=a.value)==null?void 0:i.showPopup)==null?void 0:d.call(i,m)}),onMouseleave:s[3]||(s[3]=()=>{var m,i;return(i=(m=a.value)==null?void 0:m.startCheckIfPointerReachPopup)==null?void 0:i.call(m)})}),[B(D,{ref_key:"flexibleMenu",ref:n,"visible-items":o.value,"collapsed-items":e.value,"max-lines":u.maxLines,class:"overflow-clip","onUpdate:visibleItems":s[0]||(s[0]=m=>o.value=m),"onUpdate:collapsedItems":s[1]||(s[1]=m=>e.value=m)},{visibleItems:P(()=>[N(u.$slots,"default",{visibleItems:o.value})]),collapsedMenu:P(()=>[I("...")]),_:3},8,["visible-items","collapsed-items","max-lines"])],16),e.value.length?(r(),c(ne,{key:0,ref_key:"popupRef",ref:a,text:u.popupText},null,8,["text"])):_("",!0)],64))}}),pe={key:1},ie={name:"AppTableTextWithSearch"},A=f({...ie,props:{text:{},pattern:{},splitToChars:{type:Boolean}},setup(p){const t=p,o=v(()=>t.pattern!==void 0),e=R(),a=v(()=>Y(t.text,t.pattern??"",L.Text,t.splitToChars));return(l,n)=>o.value?(r(!0),x(V,{key:0},S(a.value,(u,s)=>(r(),x("span",$({key:s,ref_for:!0},k(e),{class:["whitespace-pre",k(q)(u)]}),T(u.text),17))),128)):(r(),x("span",pe,T(l.text),1))}}),ce={name:"AppTableText"},M=f({...ce,props:{text:{},pattern:{},maxLines:{}},setup(p){const t=p,o=v(()=>t.maxLines!==void 0),e=v(()=>t.text.split(""));return(a,l)=>o.value?(r(),c(re,{key:0,items:e.value,"popup-text":a.text,"max-lines":a.maxLines},{default:P(({visibleItems:n})=>[B(A,{text:n.join(""),pattern:a.pattern,"split-to-chars":""},null,8,["text","pattern"])]),_:1},8,["items","popup-text","max-lines"])):(r(),c(A,{key:1,text:a.text,pattern:a.pattern},null,8,["text","pattern"]))}}),me={name:"AppTableCellText"},de=f({...me,props:{cell:{}},setup(p){return(t,o)=>(r(),c(M,{text:t.cell.text,pattern:t.cell.pattern,"max-lines":t.cell.maxLines},null,8,["text","pattern","max-lines"]))}}),fe={name:"AppTableCellTexts"},_e=f({...fe,props:{cell:{}},setup(p){return(t,o)=>(r(!0),x(V,null,S(t.cell.spans,(e,a)=>{var l,n,u,s,m;return r(),x("span",{key:a,class:b([(l=e.modifier)==null?void 0:l.text,(n=e.modifier)==null?void 0:n.textColor,(u=e.modifier)==null?void 0:u.textAlign,(s=e.modifier)==null?void 0:s.other,(m=e.modifier)==null?void 0:m.padding])},[e.type==="text"?(r(),x(V,{key:0},[I(T(e.text),1)],64)):_("",!0),e.type==="link"?(r(),c(E,{key:1,to:e.href,"link-style":k(z).Style7,onClick:e.click},{default:P(()=>{var i;return[g("span",{class:b((i=e.modifier)==null?void 0:i.text)},T(e.title),3)]}),_:2},1032,["to","link-style","onClick"])):_("",!0)],2)}),128))}}),ve={name:"AppTableCellButtons"},he=f({...ve,props:{cellButtons:{}},setup(p){return(t,o)=>(r(!0),x(V,null,S(t.cellButtons,(e,a)=>(r(),c(K,{key:a,text:e.text,color:e.color,size:e.size,"is-disabled":e.isDisabled,"is-loading":e.isLoading,type:e.type,onButtonClick:e.click},null,8,["text","color","size","is-disabled","is-loading","type","onButtonClick"]))),128))}}),ke={name:"AppTableCellLink"},ye=f({...ke,props:{cell:{}},setup(p){const t=p,o=v(()=>t.cell.isDisabled?void 0:t.cell.click);return(e,a)=>(r(),c(E,{to:e.cell.href,"link-style":e.cell.linkStyle??k(z).Style7,"is-disabled":e.cell.isDisabled,class:"w-full",onClick:o.value},{default:P(()=>[B(M,{text:e.cell.title,pattern:e.cell.pattern,"max-lines":e.cell.maxLines,class:b(e.cell.isDisabled&&"pointer-events-auto cursor-default")},null,8,["text","pattern","max-lines","class"])]),_:1},8,["to","link-style","is-disabled","onClick"]))}}),xe={name:"AppTableCellTag"},Pe=f({...xe,props:{cell:{}},setup(p){return(t,o)=>(r(),c(Q,O(X(t.cell.tag)),null,16))}}),Ve={name:"AppTableCellSearch"},Ce=f({...Ve,props:{cell:{}},setup(p){return(t,o)=>(r(),c(J,{text:t.cell.text,pattern:t.cell.pattern,"color-type":k(L).BackGround},null,8,["text","pattern","color-type"]))}}),Te={name:"AppTableCellInput"},be=f({...Te,props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:t}){var u;const o=p,e=t,a=v(()=>o.modelValue.type==="input"?o.modelValue.input:void 0),l=y(((u=a.value)==null?void 0:u.modelValue)??""),n=s=>{e("update:modelValue",{...o.modelValue,type:"input",input:{...a.value,modelValue:s??""}})};return w(()=>a.value,()=>{var s;return l.value=((s=a.value)==null?void 0:s.modelValue)??""}),(s,m)=>(r(),c(Z,$(a.value,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=i=>l.value=i),onBlur:m[1]||(m[1]=()=>n(l.value))}),null,16,["modelValue"]))}}),$e={name:"AppTableCellIcon"},we=f({...$e,props:{cell:{}},setup(p){return(t,o)=>{var e;return r(),c(j,{icon:t.cell.icon,size:t.cell.size,class:b([(e=t.cell.modifier)==null?void 0:e.other])},null,8,["icon","size","class"])}}}),ge={name:"AppTableCellCustomRender"},Be=f({...ge,props:{cell:{}},setup(p){const t=p,o=v(()=>t.cell.nodeRender);return(e,a)=>(r(),c(k(o)))}}),Se={name:"AppTableCellCheckBox"},Ae=f({...Se,props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:t}){const o=p,e=t,a=v({get(){return o.modelValue.isChecked},set(l){e("update:modelValue",{...o.modelValue,isChecked:l})}});return(l,n)=>(r(),c(G,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u)},null,8,["modelValue"]))}}),Re={name:"AppTableBaseCell"},We=f({...Re,props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:t}){const o=p,e=t,a=v({get(){return o.modelValue},set(l){e("update:modelValue",l)}});return(l,n)=>(r(),x(V,null,[l.modelValue.type==="text"?(r(),c(de,{key:0,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="texts"?(r(),c(_e,{key:1,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="buttons"?(r(),c(he,{key:2,"cell-buttons":l.modelValue.buttons},null,8,["cell-buttons"])):_("",!0),l.modelValue.type==="link"?(r(),c(ye,{key:3,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="tag"?(r(),c(Pe,{key:4,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="search"?(r(),c(Ce,{key:5,cell:l.modelValue},null,8,["cell"])):_("",!0),a.value.type==="input"?(r(),c(be,{key:6,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u)},null,8,["modelValue"])):_("",!0),l.modelValue.type==="icon"?(r(),c(we,{key:7,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="render"?(r(),c(Be,{key:8,cell:l.modelValue},null,8,["cell"])):_("",!0),l.modelValue.type==="checkBox"?(r(),c(Ae,{key:9,modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=u=>a.value=u)},null,8,["modelValue"])):_("",!0)],64))}}),Ne=(p,t,o)=>{const e=p.cells.slice();return e[t]=o,{...p,cells:e}},Oe=(p,t)=>{const o=l=>{const n=k(p);if(n){const u=parseInt(window.getComputedStyle(n).top),s=n.getBoundingClientRect().top;s===u&&!l.value?a(!0,l):s!==u&&l.value&&a(!1,l)}else a(!1,l)},e=()=>{const l=y(!1);["scroll","resize"].forEach(n=>{window.addEventListener(n,()=>{o(l)})}),o(l)};function a(l,n){t(l),n.value=l}return{setHeaderSticknessStatusListeners:e}};export{ne as _,se as a,We as b,Ae as c,de as d,we as e,Ne as g,Oe as u};
