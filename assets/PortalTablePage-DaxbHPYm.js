var Ft=(e,o,t)=>{if(!o.has(e))throw TypeError("Cannot "+t)};var x=(e,o,t)=>(Ft(e,o,"read from private field"),t?t.call(e):o.get(e)),L=(e,o,t)=>{if(o.has(e))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(e):o.set(e,t)},H=(e,o,t,n)=>(Ft(e,o,"write to private field"),n?n.call(e,t):o.set(e,t),t);var Q=(e,o,t)=>(Ft(e,o,"access private method"),t);import{A as St,T as bo}from"./TextButton-B1kOvmUg.js";import{_ as In,p as Rn}from"./models-C4a6qAqm.js";import{g as je,r as Wo,e as Go,a as Fn}from"./array-ChzTB90U.js";import{S as wo,c as Pn}from"./compare-CYLiHIG1.js";import{T as An,U as Ht,V as Ln,W as Co,X as xo,Y as Hn,Z as Bn,$ as Mn,a0 as So,a1 as Nn,a2 as Un,a3 as oe,a4 as jn,g as y,a5 as Qn,C as _e,y as j,a6 as ko,a7 as _o,a8 as qn,a9 as zn,aa as Wn,d as w,e as g,o as b,c as D,a as V,n as B,_ as Dt,F as X,b as T,r as ke,f as _,u as C,h as z,D as fe,w as A,I as U,S as ne,ab as Ko,O as Bt,p as G,ac as et,ad as kt,ae as de,af as Gn,P as Kn,Q as Yn,ag as Xn,G as lo,z as _t,t as ro,ah as ce,ai as Zn,aj as Y,ak as me,J as Jn,al as el,am as tl}from"./app-BJS3HRcf.js";import{_ as ol,a as nl,g as ll,b as rl,c as al,d as sl,e as il,u as ul}from"./useTableHeaderSticknessStatus-CW3bM2ZN.js";import{g as dl,s as cl}from"./BasePopup.vue_vue_type_script_setup_true_lang-Ci6Wsd6C.js";import{g as $o}from"./SearchResultSpan.vue_vue_type_script_setup_true_lang-DLEqZUCl.js";import{_ as pl}from"./BaseSelectDropDown.vue_vue_type_script_setup_true_lang-DQJYnFGB.js";import{b as Mt,a as fl}from"./IconButton-DXV6cEFU.js";import{S as ve}from"./size-CZEB3HWR.js";import{_ as ml,c as tt,u as ze}from"./BaseForm.vue_vue_type_script_setup_true_lang-qtcDr7Jz.js";import{A as Le,_ as vl}from"./AppSwitcher.vue_vue_type_script_setup_true_lang-D_8Gdrxe.js";import{_ as Yo}from"./SimpleSelect.vue_vue_type_script_setup_true_lang-BDt7-4jW.js";import{B as Eo}from"./BaseInput-Cdvw5_5o.js";import{r as hl,t as yl,p as Vo,m as Do,f as To}from"./index-CoNwWjZd.js";import{_ as gl}from"./CalendarRangeSelect.vue_vue_type_script_setup_true_lang-DnyAsE29.js";import{_ as bl}from"./MultiSelect.vue_vue_type_script_setup_true_lang-DOiAbJxf.js";import{r as Oo}from"./string-IWyLvnMj.js";import{_ as wl}from"./IconCross24.vue_vue_type_script_setup_true_lang-DVnYKftb.js";import{_ as Cl,L as Xo}from"./AppLink.vue_vue_type_script_setup_true_lang-D_VZ64dX.js";import{_ as xl}from"./BaseSimpleInput.vue_vue_type_script_setup_true_lang-BnKQF68x.js";import"./LinesSkeleton-ChN7oIGA.js";import"./LineSkeleton-jSfKveSg.js";import"./FlexibleMenu.vue_vue_type_script_setup_true_lang-CXpDXAmR.js";import"./usePopupInsideContainer-8s8n0Aqa.js";import"./BaseTag.vue_vue_type_script_setup_true_lang-BOTD6icn.js";import"./PopupInsideContainer.vue_vue_type_script_setup_true_lang-CSvXNPUX.js";import"./BaseSimpleSelect.vue_vue_type_script_setup_true_lang-jRGyN6s5.js";import"./InputErrorsList.vue_vue_type_script_setup_true_lang-DaugDlO_.js";import"./InputLabel.vue_vue_type_script_setup_true_lang-C5I-DaOW.js";var Z,F,ot,K,De,Be,pe,nt,Me,Ne,Te,Oe,xe,Ue,Ie,Xe,lt,Nt,rt,Ut,at,jt,st,Qt,it,qt,ut,zt,dt,Wt,Vt,Zo,zo,Sl=(zo=class extends An{constructor(o,t){super();L(this,Ie);L(this,lt);L(this,rt);L(this,at);L(this,st);L(this,it);L(this,ut);L(this,dt);L(this,Vt);L(this,Z,void 0);L(this,F,void 0);L(this,ot,void 0);L(this,K,void 0);L(this,De,void 0);L(this,Be,void 0);L(this,pe,void 0);L(this,nt,void 0);L(this,Me,void 0);L(this,Ne,void 0);L(this,Te,void 0);L(this,Oe,void 0);L(this,xe,void 0);L(this,Ue,new Set);this.options=t,H(this,Z,o),H(this,pe,null),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(x(this,F).addObserver(this),Io(x(this,F),this.options)?Q(this,Ie,Xe).call(this):this.updateResult(),Q(this,st,Qt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gt(x(this,F),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gt(x(this,F),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Q(this,it,qt).call(this),Q(this,ut,zt).call(this),x(this,F).removeObserver(this)}setOptions(o,t){const n=this.options,l=x(this,F);if(this.options=x(this,Z).defaultQueryOptions(o),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");Q(this,dt,Wt).call(this),x(this,F).setOptions(this.options),n._defaulted&&!Ht(this.options,n)&&x(this,Z).getQueryCache().notify({type:"observerOptionsUpdated",query:x(this,F),observer:this});const r=this.hasListeners();r&&Ro(x(this,F),l,this.options,n)&&Q(this,Ie,Xe).call(this),this.updateResult(t),r&&(x(this,F)!==l||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&Q(this,lt,Nt).call(this);const a=Q(this,rt,Ut).call(this);r&&(x(this,F)!==l||this.options.enabled!==n.enabled||a!==x(this,xe))&&Q(this,at,jt).call(this,a)}getOptimisticResult(o){const t=x(this,Z).getQueryCache().build(x(this,Z),o),n=this.createResult(t,o);return _l(this,n)&&(H(this,K,n),H(this,Be,this.options),H(this,De,x(this,F).state)),n}getCurrentResult(){return x(this,K)}trackResult(o,t){const n={};return Object.keys(o).forEach(l=>{Object.defineProperty(n,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),t==null||t(l),o[l])})}),n}trackProp(o){x(this,Ue).add(o)}getCurrentQuery(){return x(this,F)}refetch({...o}={}){return this.fetch({...o})}fetchOptimistic(o){const t=x(this,Z).defaultQueryOptions(o),n=x(this,Z).getQueryCache().build(x(this,Z),t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(o){return Q(this,Ie,Xe).call(this,{...o,cancelRefetch:o.cancelRefetch??!0}).then(()=>(this.updateResult(),x(this,K)))}createResult(o,t){var I;const n=x(this,F),l=this.options,r=x(this,K),a=x(this,De),s=x(this,Be),f=o!==n?o.state:x(this,ot),{state:m}=o;let p={...m},c=!1,u;if(t._optimisticResults){const O=this.hasListeners(),M=!O&&Io(o,t),J=O&&Ro(o,n,t,l);(M||J)&&(p={...p,...Mn(m.data,o.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:i,errorUpdatedAt:v,status:h}=p;if(t.select&&p.data!==void 0)if(r&&p.data===(a==null?void 0:a.data)&&t.select===x(this,nt))u=x(this,Me);else try{H(this,nt,t.select),u=t.select(p.data),u=So(r==null?void 0:r.data,u,t),H(this,Me,u),H(this,pe,null)}catch(O){H(this,pe,O)}else u=p.data;if(t.placeholderData!==void 0&&u===void 0&&h==="pending"){let O;if(r!=null&&r.isPlaceholderData&&t.placeholderData===(s==null?void 0:s.placeholderData))O=r.data;else if(O=typeof t.placeholderData=="function"?t.placeholderData((I=x(this,Ne))==null?void 0:I.state.data,x(this,Ne)):t.placeholderData,t.select&&O!==void 0)try{O=t.select(O),H(this,pe,null)}catch(M){H(this,pe,M)}O!==void 0&&(h="success",u=So(r==null?void 0:r.data,O,t),c=!0)}x(this,pe)&&(i=x(this,pe),u=x(this,Me),v=Date.now(),h="error");const k=p.fetchStatus==="fetching",E=h==="pending",P=h==="error",W=E&&k,S=u!==void 0;return{status:h,fetchStatus:p.fetchStatus,isPending:E,isSuccess:h==="success",isError:P,isInitialLoading:W,isLoading:W,data:u,dataUpdatedAt:p.dataUpdatedAt,error:i,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:k,isRefetching:k&&!E,isLoadingError:P&&!S,isPaused:p.fetchStatus==="paused",isPlaceholderData:c,isRefetchError:P&&S,isStale:ao(o,t),refetch:this.refetch}}updateResult(o){const t=x(this,K),n=this.createResult(x(this,F),this.options);if(H(this,De,x(this,F).state),H(this,Be,this.options),x(this,De).data!==void 0&&H(this,Ne,x(this,F)),Ht(n,t))return;H(this,K,n);const l={},r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!x(this,Ue).size)return!0;const d=new Set(s??x(this,Ue));return this.options.throwOnError&&d.add("error"),Object.keys(x(this,K)).some(f=>{const m=f;return x(this,K)[m]!==t[m]&&d.has(m)})};(o==null?void 0:o.listeners)!==!1&&r()&&(l.listeners=!0),Q(this,Vt,Zo).call(this,{...l,...o})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Q(this,st,Qt).call(this)}},Z=new WeakMap,F=new WeakMap,ot=new WeakMap,K=new WeakMap,De=new WeakMap,Be=new WeakMap,pe=new WeakMap,nt=new WeakMap,Me=new WeakMap,Ne=new WeakMap,Te=new WeakMap,Oe=new WeakMap,xe=new WeakMap,Ue=new WeakMap,Ie=new WeakSet,Xe=function(o){Q(this,dt,Wt).call(this);let t=x(this,F).fetch(this.options,o);return o!=null&&o.throwOnError||(t=t.catch(Ln)),t},lt=new WeakSet,Nt=function(){if(Q(this,it,qt).call(this),Co||x(this,K).isStale||!xo(this.options.staleTime))return;const t=Hn(x(this,K).dataUpdatedAt,this.options.staleTime)+1;H(this,Te,setTimeout(()=>{x(this,K).isStale||this.updateResult()},t))},rt=new WeakSet,Ut=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(x(this,F)):this.options.refetchInterval)??!1},at=new WeakSet,jt=function(o){Q(this,ut,zt).call(this),H(this,xe,o),!(Co||this.options.enabled===!1||!xo(x(this,xe))||x(this,xe)===0)&&H(this,Oe,setInterval(()=>{(this.options.refetchIntervalInBackground||Bn.isFocused())&&Q(this,Ie,Xe).call(this)},x(this,xe)))},st=new WeakSet,Qt=function(){Q(this,lt,Nt).call(this),Q(this,at,jt).call(this,Q(this,rt,Ut).call(this))},it=new WeakSet,qt=function(){x(this,Te)&&(clearTimeout(x(this,Te)),H(this,Te,void 0))},ut=new WeakSet,zt=function(){x(this,Oe)&&(clearInterval(x(this,Oe)),H(this,Oe,void 0))},dt=new WeakSet,Wt=function(){const o=x(this,Z).getQueryCache().build(x(this,Z),this.options);if(o===x(this,F))return;const t=x(this,F);H(this,F,o),H(this,ot,o.state),this.hasListeners()&&(t==null||t.removeObserver(this),o.addObserver(this))},Vt=new WeakSet,Zo=function(o){Nn.batch(()=>{o.listeners&&this.listeners.forEach(t=>{t(x(this,K))}),x(this,Z).getQueryCache().notify({query:x(this,F),type:"observerResultsUpdated"})})},zo);function kl(e,o){return o.enabled!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&o.retryOnMount===!1)}function Io(e,o){return kl(e,o)||e.state.data!==void 0&&Gt(e,o,o.refetchOnMount)}function Gt(e,o,t){if(o.enabled!==!1){const n=typeof t=="function"?t(e):t;return n==="always"||n!==!1&&ao(e,o)}return!1}function Ro(e,o,t,n){return(e!==o||n.enabled===!1)&&(!t.suspense||e.state.status!=="error")&&ao(e,t)}function ao(e,o){return o.enabled!==!1&&e.isStaleByTime(o.staleTime)}function _l(e,o){return!Ht(e.getCurrentResult(),o)}function $l(e=""){if(!Un())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const o=jn(e),t=oe(o);if(!t)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return t}function El(e,o,t){const n=$l(),l=y(()=>{const c=Qn(o);typeof c.enabled=="function"&&(c.enabled=c.enabled());const u=n.defaultQueryOptions(c);return u._optimisticResults=n.isRestoring.value?"isRestoring":"optimistic",u}),r=new e(n,l.value),a=_e(r.getCurrentResult());let s=()=>{};j(n.isRestoring,c=>{c||(s(),s=r.subscribe(u=>{ko(a,u)}))},{immediate:!0});const d=()=>{r.setOptions(l.value),ko(a,r.getCurrentResult())};j(l,d),Wn(()=>{s()});const f=(...c)=>(d(),a.refetch(...c)),m=()=>new Promise((c,u)=>{let i=()=>{};const v=()=>{if(l.value.enabled!==!1){r.setOptions(l.value);const h=r.getOptimisticResult(l.value);h.isStale?(i(),r.fetchOptimistic(l.value).then(c,k=>{_o(l.value.throwOnError,[k,r.getCurrentQuery()])?u(k):c(r.getCurrentResult())})):(i(),c(h))}};v(),i=j(l,v)});j(()=>a.error,c=>{if(a.isError&&!a.isFetching&&_o(l.value.throwOnError,[c,r.getCurrentQuery()]))throw c});const p=qn(zn(a));for(const c in a)typeof a[c]=="function"&&(p[c]=a[c]);return p.suspense=m,p.refetch=f,p}function Vl(e,o){return El(Sl,e)}function Dl(e){hl(1,arguments);var o=yl(e);return o.setHours(23,59,59,999),o}var He=(e=>(e[e.Asc=0]="Asc",e[e.Desc=1]="Desc",e))(He||{});const Tl=w({name:"PortalTableBaseRowAction"}),Ol=w({...Tl,props:{rowAction:{}},setup(e){const o=g();return(t,n)=>{var l,r;return b(),D(X,null,[V(Dt,{icon:t.rowAction.icon,size:16,class:B(["cursor-pointer",((l=t.rowAction.modifier)==null?void 0:l.textColor)??"text-blueGrey-2 hover:text-blue-2",(r=t.rowAction.modifier)==null?void 0:r.other]),onClick:t.rowAction.onIconClick,onMouseenter:n[0]||(n[0]=a=>{var s;return(s=o.value)==null?void 0:s.showPopup(a)}),onMouseleave:n[1]||(n[1]=()=>{var a;return(a=o.value)==null?void 0:a.closePopup()})},null,8,["icon","class","onClick"]),V(ol,{ref_key:"popupRef",ref:o,text:t.rowAction.title,class:"size-max"},null,8,["text"])],64)}}}),Il={class:"bg-white"},Rl={name:"PortalTableBaseRowActions"},Fl=w({...Rl,props:{actionsSection:{}},setup(e){return(o,t)=>{var n,l,r;return b(),D("div",Il,[T("div",{class:B(["flex h-full w-full flex-nowrap gap-x-2",((n=o.actionsSection.modifier)==null?void 0:n.border)??"border-l",((l=o.actionsSection.modifier)==null?void 0:l.padding)??"p-3",(r=o.actionsSection.modifier)==null?void 0:r.other])},[(b(!0),D(X,null,ke(o.actionsSection.actions,(a,s)=>(b(),_(Ol,{key:s,"row-action":a},null,8,["row-action"]))),128))],2)])}}}),Pl={name:"PortalTableRowPopup"},Al=w({...Pl,props:{popup:{}},setup(e,{expose:o}){const t=g();return o({showPopup:r=>{var f,m,p;const a=(f=r.target)==null?void 0:f.getBoundingClientRect(),{top:s}=dl(a,"top"),d=r.clientX;(p=(m=t.value)==null?void 0:m.showPopup)==null||p.call(m,d,s)},closePopup:()=>{var r,a;return(a=(r=t.value)==null?void 0:r.closePopup)==null?void 0:a.call(r)}}),(r,a)=>{var s,d;return b(),_(nl,{ref_key:"popupRef",ref:t,text:r.popup.text,class:B(["z-10 w-max",(s=r.popup.modifier)==null?void 0:s.textColor,(d=r.popup.modifier)==null?void 0:d.other])},null,8,["text","class"])}}}),Ll=40,Hl=5;var Qe=(e=>(e.All="All",e.FromSelect="FromSelect",e))(Qe||{}),be=(e=>(e.NotApply="NotApply",e.SelectZero="SelectZero",e.FromSelect="FromSelect",e))(be||{});const Jo=e=>{switch(e.type){case"icon":case"checkBox":return e.stubText??"";case"text":return e.fullName??e.text}},so=e=>je(e),Bl=e=>e.type==="sort"?{...e,sortOrder:void 0}:e,Fo=e=>{var o;return{...e,controls:(o=e.controls)==null?void 0:o.map(Bl)}},Kt=e=>[...e].sort((o,t)=>(o.index??0)-(t.index??0)),Po=(e,o)=>{const t=Kt(e.cells);return{...e,cells:e.cells.map((n,l)=>{const r=en(t),a=o==null?void 0:o.at(l);let s;const d=a==null?void 0:a.getBoundingClientRect().width;if(a){const f=window.getComputedStyle(a).minWidth,m=f.endsWith("px")?f.slice(0,-2):f;s=m!==""?Number(m):Ll}return{...n,width:d,minWidth:s,isLastVisibleCell:l===r}})}},en=e=>{const o=e==null?void 0:e.map(t=>!t.isHidden).lastIndexOf(!0);return o!==-1?o:e.length-1},Ao=(e,o,t)=>{const n=e.cells.map(a=>a.index===t).lastIndexOf(!0),r=e.cells.every(a=>a.index===void 0)?t:n;return{...e,cells:Wo(o,r,e.cells)}},Yt=(e,o)=>{var l;const t=(l=ue(e,o))==null?void 0:l.value,n=je(t);return(n==null?void 0:n.toString())??void 0},Tt=(e,o)=>{const n=(o instanceof Array?o:[o]).reduce((l,r)=>Object.assign(l,{[r.key]:r.value}),{});e.push({path:e.currentRoute.value.path,query:{...e.currentRoute.value.query,...n}})},ue=(e,o)=>{const t=e.currentRoute.value.query[o];return t?{key:o,value:t}:void 0},Ml=(e,o)=>{const t=[...e].sort((l,r)=>l.index-r.index),n=en(t);return(o==null?void 0:o.map((l,r)=>({...l,isHidden:e[r].isHidden,index:e[r].index,isLastVisibleCell:e[r].index===n})))??[]},gt=e=>(e==null?void 0:e.map((o,t)=>({title:Jo(o),isDisabled:o.isDisabled??!1,isHidden:o.isHidden??!1,isHiddenInitially:o.isHidden??!1,index:o.index??t,initialIndex:o.index??t,columnIndexes:Ql(e,t)})))??[],Nl=(e,o)=>{const t=[];e==null||e.cells.forEach(n=>{var l;n.isHidden&&((l=n.controls)==null||l.forEach(r=>{r.type==="filterNumberRange"||r.type==="filterDateRange"?t.push(r.minValueName,r.maxValueName):t.push(r.column)}))}),Tt(o,t.map(n=>({key:n,value:void 0})))},Ul=(e,o)=>{const t=[];o.forEach(n=>{const l=n.getQueryParam();l instanceof Array?t.push(...l):t.push(l)}),Tt(e,t)},jl=e=>{const o=[];return e==null||e.cells.forEach((t,n)=>{var l;t.isHidden||(l=t.controls)==null||l.forEach((r,a)=>{r.type!=="sort"&&o.push({columnControl:r,columnControlIndex:a,headerCellIndex:n,headerTitle:Jo(t)})})}),o},ge=(e,o,t)=>{const n=Yt(e,o.column),l=C(t);return l?l.find(r=>r.value===n):n?{title:n,value:n}:void 0},We=e=>{const o=e.getColumnData();if(o instanceof Array)return{options:y(()=>$o(o,wo.Asc)),isLoadingOptions:g(!1),isLoadingOptionsError:g(!1)};const{data:t,isLoading:n,isLoadingError:l}=o;return{options:y(()=>$o(t.value,wo.Asc)),isLoadingOptions:n,isLoadingOptionsError:l}},Ql=(e,o)=>{const t=e.slice(0,o).map(r=>r.colspan??1).reduce((r,a)=>r+a,0),n=e[o].colspan??1,l=Array(n).fill(0).map((r,a)=>a+t);return n===1?t:l},ql=(e,o)=>{const t=e.findIndex(n=>Go(n.columnIndexes,o));return t!==-1?e[t].index:0},zl=["rowspan","colspan"],Wl={name:"PortalTableBaseRow"},Gl=w({...Wl,props:{modelValue:{},columnSettings:{}},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,n=o,l=g(),r=g(),a=y(()=>t.modelValue.cells.map((f,m)=>({...f,sortingIndex:ql(t.columnSettings,m),beforeSortIndex:m})).sort(Pn("sortingIndex"))),s=d=>{var f;return!((f=t.columnSettings.find(m=>Go(m.columnIndexes,d.beforeSortIndex)))!=null&&f.isHidden)};return(d,f)=>{var m,p,c;return b(),D(X,null,[T("tr",{class:B(["group",(m=d.modelValue.modifier)==null?void 0:m.text,(p=d.modelValue.modifier)==null?void 0:p.textColor,(c=d.modelValue.modifier)==null?void 0:c.other]),onMouseenter:f[0]||(f[0]=u=>{var i;(i=l.value)==null||i.showPopup(u),r.value&&(r.value.style.height=`${u.target.getBoundingClientRect().height}px`)}),onMouseleave:f[1]||(f[1]=()=>{var u;return(u=l.value)==null?void 0:u.closePopup()})},[(b(!0),D(X,null,ke(a.value,(u,i)=>{var v,h,k,E,P,W,S,$;return b(),D(X,{key:`cell_${i}`},[s(u)?(b(),D("td",{key:0,rowspan:u.rowspan,colspan:u.colspan,class:B([(v=u.modifier)==null?void 0:v.text,(h=u.modifier)==null?void 0:h.textColor,((k=u.modifier)==null?void 0:k.textAlign)??(i===0?"text-left":"text-right"),((E=u.modifier)==null?void 0:E.verticalAlign)??"align-top",((P=u.modifier)==null?void 0:P.padding)??["py-3",i>0&&"pl-8 md:pl-16"],((W=u.modifier)==null?void 0:W.border)??"border-t border-t-blueGrey-4",(S=u.modifier)==null?void 0:S.width,($=u.modifier)==null?void 0:$.other])},[(b(),_(rl,{key:i,"model-value":u,"onUpdate:modelValue":I=>n("update:modelValue",C(ll)(d.modelValue,u.beforeSortIndex,I))},null,8,["model-value","onUpdate:modelValue"]))],10,zl)):z("",!0)],64)}),128)),T("td",{ref_key:"tdRef",ref:r,class:"absolute right-0 hidden group-hover:block"},[d.modelValue.actionsSection?(b(),_(Fl,{key:0,"actions-section":d.modelValue.actionsSection,class:"h-full"},null,8,["actions-section"])):z("",!0)],512)],34),d.modelValue.popup?(b(),_(Al,{key:0,ref_key:"popupRef",ref:l,popup:d.modelValue.popup},null,8,["popup"])):z("",!0)],64)}}}),Kl={name:"PortalTableDataBody"},Yl=w({...Kl,props:{modelValue:{},columnSettings:{}},emits:["update:modelValue"],setup(e,{emit:o}){const t=o,n=(l,r,a)=>{const s=l.slice();s[r]=a,t("update:modelValue",s)};return(l,r)=>(b(),D("tbody",null,[(b(!0),D(X,null,ke(l.modelValue,(a,s)=>(b(),_(Gl,{key:`row_${s}`,"model-value":a,"column-settings":l.columnSettings,"onUpdate:modelValue":d=>n(l.modelValue,s,d)},null,8,["model-value","column-settings","onUpdate:modelValue"]))),128))]))}}),Xl={class:"w-full overflow-x-auto scrollbar-thin"},Zl=w({name:"PortalTableBase"}),Jl=w({...Zl,props:{table:{},isLoading:{type:Boolean}},setup(e,{expose:o}){const t=g();return o({tableRef:t}),(n,l)=>{var r,a,s,d;return b(),D("div",Xl,[T("table",{ref_key:"tableRef",ref:t,class:B([((r=n.table.modifier)==null?void 0:r.text)??"text-size-5",((a=n.table.modifier)==null?void 0:a.textColor)??"text-black-1",((s=n.table.modifier)==null?void 0:s.width)??"w-full",(d=n.table.modifier)==null?void 0:d.other,"relative"])},[fe(n.$slots,"header"),n.isLoading?z("",!0):fe(n.$slots,"default",{key:0})],2),fe(n.$slots,"afterTable")])}}}),er={class:"flex w-110 items-start justify-between gap-x-3 bg-white px-6 py-5 shadow-2"},tr={class:"w-72 grow"},or={class:"flex shrink-0 items-end gap-x-3"},nr=w({name:"ColumnFilterBase"}),ct=w({...nr,props:{icon:{},validator:{},isActive:{type:Boolean},tableContainer:{}},emits:["ok:click","cross:click"],setup(e,{expose:o,emit:t}){const n=e,l=t,r=y(()=>n.validator??{$validate:()=>new Promise(()=>{}),$touch:()=>{},$reset:()=>{}}),a=g(),s=y(()=>{var c;return!!((c=a.value)!=null&&c.isDropDownShown)}),d=y(()=>{var c;return(c=a.value)==null?void 0:c.dropdown}),f=c=>{l("ok:click"),c(!1)},m=c=>{l("cross:click"),c(!1)},p=c=>{if(!c)return;const{originalPosition:u,shiftedPosition:i}=cl(c,n.tableContainer,{},!1,!1);u.left!==i.left&&(c.style.left=`${i.left}px`)};return o({isDropDownShown:s}),(c,u)=>(b(),_(pl,{ref_key:"baseSelectDropDown",ref:a,"is-drop-down-fixed":"","onBefore:visible":u[0]||(u[0]=()=>p(d.value))},{input:A(({toggleDropDown:i})=>[V(Dt,{icon:c.icon,size:16,class:B(["cursor-pointer hover:text-blue-2",s.value||c.isActive?"text-black-1":"text-blueGrey-2"]),onClick:i},null,8,["icon","class","onClick"])]),dropDown:A(({registerCallSection:i,unregisterCallSection:v,setDropDownVisibility:h})=>[V(ml,{validator:r.value,onSubmit:()=>f(h),onVnodeMounted:i,onVnodeUnmounted:v},{default:A(()=>[T("div",er,[T("div",tr,[fe(c.$slots,"default")]),T("div",or,[V(Mt,{type:"submit","icon-name":C(U).IconMark,size:C(ve).S},null,8,["icon-name","size"]),V(Mt,{"icon-name":C(U).IconCross,color:C(St).Grey,size:C(ve).S,class:"text-red-2",onButtonClick:()=>m(h)},null,8,["icon-name","color","size","onButtonClick"])])])]),_:2},1032,["validator","onSubmit","onVnodeMounted","onVnodeUnmounted"])]),_:3},512))}}),lr=(e,o)=>e===Qe.All||o==null?void 0:o.value,bt=e=>e?Qe.FromSelect:Qe.All,rr=e=>e.radio===Qe.FromSelect&&!!e.selectedOption||e.radio===Qe.All,ar=()=>({selectedOption:void 0,radio:bt(void 0)}),sr={class:"flex flex-col gap-y-4"},ir=w({name:"FilterSelectSwitch"}),tn=w({...ir,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),{isLoadingOptions:l,isLoadingOptionsError:r,options:a}=We(t.columnControl),s=g(Ko()),d=_e({radio:bt(ge(n,t.columnControl,a)),selectedOption:ge(n,t.columnControl,a)}),f={selectedOption:tt.withMessage("require",()=>rr(d)),radio:{}},m=ze(f,d),p=y(()=>m.value.$error),c=()=>{d.selectedOption=ge(n,t.columnControl,a),d.radio=bt(d.selectedOption)},u=()=>Object.assign(d,ar()),i=()=>({key:t.columnControl.column,value:lr(d.radio,d.selectedOption)});return j(a,()=>{d.selectedOption=ge(n,t.columnControl,a),d.radio=bt(d.selectedOption)}),o({type:t.columnControl.type,reset:c,validator:m,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:p,getQueryParam:i,clear:u}),(v,h)=>{var k;return b(),D("div",sr,[V(Le,{modelValue:d.radio,"onUpdate:modelValue":h[0]||(h[0]=E=>d.radio=E),"group-name":s.value,value:"All",label:`Выбрать всех${`${(k=C(a))!=null&&k.length?` (${C(a).length})`:""}`}`},null,8,["modelValue","group-name","label"]),V(Le,{modelValue:d.radio,"onUpdate:modelValue":h[1]||(h[1]=E=>d.radio=E),"group-name":s.value,value:"FromSelect",label:"Выбрать из списка"},null,8,["modelValue","group-name"]),d.radio==="FromSelect"?(b(),_(Yo,{key:0,modelValue:d.selectedOption,"onUpdate:modelValue":h[2]||(h[2]=E=>d.selectedOption=E),options:C(a),"is-loading":C(l),"is-error":C(m).$error,"is-error-loading":C(r),placeholder:v.columnControl.placeholder,size:C(ve).S,"is-full-width-drop-down":"",onVnodeMounted:h[3]||(h[3]=E=>C(m).$reset())},null,8,["modelValue","options","is-loading","is-error","is-error-loading","placeholder","size"])):z("",!0)])}}}),io=(e,o)=>{const t=y(()=>o.column),n=g(ue(e,t.value)),l=r=>{r&&Tt(e,r)};return j(()=>e.currentRoute.value.query,()=>n.value=ue(e,t.value)),{addNewQueryParamToUrl:l,queryParam:n}},ur=w({name:"ColumnFilterSelectSwitch"}),dr=w({...ur,props:{columnControl:{},tableContainer:{}},setup(e,{expose:o}){const t=e,n=ne(),l=g(),r=g(),{addNewQueryParamToUrl:a,queryParam:s}=io(n,t.columnControl),{options:d}=We(t.columnControl),f=y(()=>{var u;return((u=l.value)==null?void 0:u.isDropDownShown)||!!ge(n,t.columnControl,d)}),m=y(()=>{var u;return(u=l.value)==null?void 0:u.isDropDownShown}),p=()=>{var u;return a((u=r.value)==null?void 0:u.getQueryParam())},c=()=>{var u;(u=r.value)==null||u.clear(),p()};return o({isActive:f,type:t.columnControl.type,isDropDownShown:m,queryParam:s}),(u,i)=>{var v;return b(),_(ct,{ref_key:"filterBase",ref:l,icon:C(U).IconFilter,"is-active":f.value,validator:C((v=r.value)==null?void 0:v.validator),"table-container":u.tableContainer,"onOk:click":p,"onCross:click":c},{default:A(()=>[V(tn,{ref_key:"filterSelectSwitch",ref:r,"column-control":u.columnControl},null,8,["column-control"])]),_:1},8,["icon","is-active","validator","table-container"])}}}),qe=e=>e!==""&&!isNaN(Number(e))?Number(e):void 0,wt=(e,o)=>cr(ue(e,o.minValueName),ue(e,o.maxValueName)),cr=(e,o)=>{const t=je(e==null?void 0:e.value),n=je(o==null?void 0:o.value);return{minValue:qe((t==null?void 0:t.toString())??""),maxValue:qe((n==null?void 0:n.toString())??"")}},pr=()=>({minValue:void 0,maxValue:void 0}),fr={class:"flex items-center gap-x-2"},mr=T("span",{class:"text-size-5 text-black-1"},"–",-1),vr=w({name:"FilterNumberRange"}),on=w({...vr,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),l=y(()=>t.columnControl.measureIconName?{iconName:t.columnControl.measureIconName,size:10}:void 0),r=_e(wt(n,t.columnControl)),a={minValue:tt.withMessage("order",()=>r.minValue!==void 0&&r.maxValue!==void 0&&r.minValue<=r.maxValue||!r.minValue||!r.maxValue),maxValue:{}},s=ze(a,r),d=y(()=>s.value.$error),f=y({get(){var i;return((i=r.minValue)==null?void 0:i.toString())??""},set(i){r.minValue=qe(i)}}),m=y({get(){var i;return((i=r.maxValue)==null?void 0:i.toString())??""},set(i){r.maxValue=qe(i)}}),p=()=>{r.minValue=wt(n,t.columnControl).minValue,r.maxValue=wt(n,t.columnControl).maxValue},c=()=>Object.assign(r,pr()),u=()=>[{key:t.columnControl.minValueName,value:r.minValue},{key:t.columnControl.maxValueName,value:r.maxValue}];return o({type:t.columnControl.type,reset:p,validator:s,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:d,getQueryParam:u,clear:c}),(i,v)=>(b(),D("div",fr,[V(Eo,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=h=>f.value=h),"icon-right":l.value,size:C(ve).S,"is-error":C(s).$error},null,8,["modelValue","icon-right","size","is-error"]),mr,V(Eo,{modelValue:m.value,"onUpdate:modelValue":v[1]||(v[1]=h=>m.value=h),"icon-right":l.value,size:C(ve).S,"is-error":C(s).$error},null,8,["modelValue","icon-right","size","is-error"])]))}}),nn=(e,o)=>{const t=g(ue(e,o.minValueName)),n=g(ue(e,o.maxValueName)),l=r=>{r&&Tt(e,r)};return j(()=>e.currentRoute.value.query,()=>{t.value=ue(e,o.minValueName),n.value=ue(e,o.maxValueName)}),{addNewQueryParamToUrl:l,queryParamMin:t,queryParamMax:n}},hr=w({name:"ColumnFilterNumberRange"}),yr=w({...hr,props:{columnControl:{},tableContainer:{}},setup(e,{expose:o}){const t=e,n=ne(),l=g(),r=g(),{addNewQueryParamToUrl:a,queryParamMin:s,queryParamMax:d}=nn(n,t.columnControl),f=y(()=>{var i;return((i=l.value)==null?void 0:i.isDropDownShown)||Object.values(wt(n,t.columnControl)).some(v=>v!==void 0)}),m=y(()=>{var i;return(i=l.value)==null?void 0:i.isDropDownShown}),p=y(()=>[s.value,d.value]),c=()=>{var i;return a((i=r.value)==null?void 0:i.getQueryParam())},u=()=>{var i;(i=r.value)==null||i.clear(),c()};return o({isActive:f,type:t.columnControl.type,isDropDownShown:m,queryParam:p}),(i,v)=>{var h;return b(),_(ct,{ref_key:"filterBase",ref:l,icon:C(U).IconFilter,"is-active":f.value,validator:C((h=r.value)==null?void 0:h.validator),"table-container":i.tableContainer,"onOk:click":c,"onCross:click":u},{default:A(()=>[V(on,{ref_key:"filterNumberRange",ref:r,"column-control":i.columnControl},null,8,["column-control"])]),_:1},8,["icon","is-active","validator","table-container"])}}}),gr={class:"flex items-center gap-x-2"},br=w({name:"FilterSelect"}),ln=w({...br,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),{isLoadingOptions:l,isLoadingOptionsError:r,options:a}=We(t.columnControl),s=_e({selectedOption:ge(n,t.columnControl,a)}),f=ze({selectedOption:{}},s),m=y(()=>f.value.$error),p=()=>{s.selectedOption=ge(n,t.columnControl,a)},c=()=>s.selectedOption=void 0,u=()=>{var i;return{key:t.columnControl.column,value:(i=s.selectedOption)==null?void 0:i.value}};return j(a,()=>s.selectedOption=ge(n,t.columnControl,a)),o({type:t.columnControl.type,reset:p,validator:f,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:m,getQueryParam:u,clear:c}),(i,v)=>(b(),D("div",gr,[V(Yo,{modelValue:s.selectedOption,"onUpdate:modelValue":v[0]||(v[0]=h=>s.selectedOption=h),options:C(a),placeholder:i.columnControl.placeholder,"is-loading":C(l),"is-error":C(f).$error,"is-error-loading":C(r),size:C(ve).S,"is-full-width-drop-down":"",class:"w-full"},null,8,["modelValue","options","placeholder","is-loading","is-error","is-error-loading","size"])]))}}),wr=w({name:"ColumnFilterSelect"}),Cr=w({...wr,props:{columnControl:{},tableContainer:{}},setup(e,{expose:o}){const t=e,n=ne(),l=g(),r=g(),{addNewQueryParamToUrl:a,queryParam:s}=io(n,t.columnControl),{options:d}=We(t.columnControl),f=y(()=>{var u;return((u=l.value)==null?void 0:u.isDropDownShown)||!!ge(n,t.columnControl,d)}),m=y(()=>{var u;return(u=l.value)==null?void 0:u.isDropDownShown}),p=()=>{var u;return a((u=r.value)==null?void 0:u.getQueryParam())},c=()=>{var u;(u=r.value)==null||u.clear(),p()};return o({isActive:f,type:t.columnControl.type,isDropDownShown:m,queryParam:s}),(u,i)=>{var v;return b(),_(ct,{ref_key:"filterBase",ref:l,icon:C(U).IconFilter,"is-active":f.value,validator:C((v=r.value)==null?void 0:v.validator),"table-container":u.tableContainer,"onOk:click":p,"onCross:click":c},{default:A(()=>[V(ln,{ref_key:"filterSelect",ref:r,"column-control":u.columnControl},null,8,["column-control"])]),_:1},8,["icon","is-active","validator","table-container"])}}}),xr=e=>{switch(e){case He.Asc:return He.Desc;case He.Desc:return;default:return He.Asc}},Sr=w({name:"ColumnSort"}),kr=w({...Sr,props:{columnControl:{}},emits:["update:columnControl","before:sort"],setup(e,{expose:o,emit:t}){const n=e,l=t,r=y(()=>n.columnControl.sortOrder!==void 0),a=y(()=>n.columnControl.sortOrder===He.Desc?U.IconArrangeDesc:U.IconArrangeAsc),s=()=>{n.columnControl.sortOrder===void 0&&l("before:sort"),Bt(()=>{l("update:columnControl",{...n.columnControl,sortOrder:xr(n.columnControl.sortOrder)}),Bt(()=>{n.columnControl.onChangeSortOrderHandler()})})};return o({isActive:r,type:n.columnControl.type}),(d,f)=>(b(),_(Dt,{icon:a.value,size:16,class:B(["cursor-pointer hover:text-blue-2",r.value?"text-black-1":"text-blueGrey-2"]),onClick:s},null,8,["icon","class"]))}}),Lo=(e,o)=>rn(ue(e,o.minValueName),ue(e,o.maxValueName)),rn=(e,o)=>{const t=je(e==null?void 0:e.value),n=je(o==null?void 0:o.value);return{minValue:t?Vo(t.toString()):void 0,maxValue:n?Vo(n.toString()):void 0}},an=(e,o)=>({minValue:e?Do(e):void 0,maxValue:o?Do(o):void 0}),_r=e=>({minValue:e.defaultMinValueDate,maxValue:e.defaultMaxValueDate}),$r=(e,o,t)=>{var a,s;const{minValue:n,maxValue:l}=an(e.defaultMinValueDate,e.defaultMaxValueDate),r=[];return!((a=C(o))!=null&&a.value)&&n&&r.push({key:e.minValueName,value:n}),!((s=C(t))!=null&&s.value)&&l&&r.push({key:e.maxValueName,value:l}),r.length?r:void 0},Er=w({name:"FilterDateRange"}),sn=w({...Er,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),l=_e(Lo(n,t.columnControl)),r={minValue:t.columnControl.defaultMinValueDate?tt.withMessage("require",()=>l.minValue!==void 0):{},maxValue:t.columnControl.defaultMaxValueDate?tt.withMessage("require",()=>l.maxValue!==void 0):{}},a=ze(r,l),s=y(()=>a.value.$error),d=()=>Object.assign(l,Lo(n,t.columnControl)),f=()=>Object.assign(l,_r(t.columnControl)),m=()=>{const{minValue:c,maxValue:u}=an(l.minValue,l.maxValue);return[{key:t.columnControl.minValueName,value:c},{key:t.columnControl.maxValueName,value:u}]},p=c=>{const u=new Date,i=c?Dl(c):void 0;l.maxValue=i&&i>u?u:i};return o({type:t.columnControl.type,reset:d,validator:a,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:s,getQueryParam:m,clear:f}),(c,u)=>(b(),_(gl,{"min-value":l.minValue,"onUpdate:minValue":u[0]||(u[0]=i=>l.minValue=i),"max-value":l.maxValue,"calendar-type":c.columnControl.calendarType,"is-inactive-rule":c.columnControl.isInactiveRule,"show-error":c.columnControl.showError??!1,"inactive-error-text":c.columnControl.inactiveErrorText,"is-error":C(a).$error,"error-list":["Необходимо заполнить даты"],"onUpdate:maxValue":p},null,8,["min-value","max-value","calendar-type","is-inactive-rule","show-error","inactive-error-text","is-error"]))}}),Vr=w({name:"ColumnFilterDateRange"}),Dr=w({...Vr,props:{columnControl:{},tableContainer:{}},setup(e,{expose:o}){const t=e,n=ne(),l=g(),r=g(),{addNewQueryParamToUrl:a,queryParamMin:s,queryParamMax:d}=nn(n,t.columnControl),f=y(()=>{var i;return((i=l.value)==null?void 0:i.isDropDownShown)||Object.values(rn(s.value,d.value)).some(v=>v!==void 0)}),m=y(()=>{var i;return(i=l.value)==null?void 0:i.isDropDownShown}),p=y(()=>[s.value,d.value]),c=()=>{var i;return a((i=r.value)==null?void 0:i.getQueryParam())},u=()=>{var i;(i=r.value)==null||i.clear(),c()};return G(()=>{const i=$r(t.columnControl,s,d);i&&a(i)}),o({isActive:f,type:t.columnControl.type,isDropDownShown:m,queryParam:p}),(i,v)=>{var h;return b(),_(ct,{ref_key:"filterBase",ref:l,icon:C(U).IconFilter,"is-active":f.value,validator:C((h=r.value)==null?void 0:h.validator),"table-container":i.tableContainer,"onOk:click":c,"onCross:click":u},{default:A(()=>[V(sn,{ref_key:"filterDateRange",ref:r,"column-control":i.columnControl},null,8,["column-control"])]),_:1},8,["icon","is-active","validator","table-container"])}}}),Tr=(e,o)=>{if(e!==be.NotApply)return e===be.SelectZero?null:o==null?void 0:o.map(t=>t.value)},Or=e=>e.radio===be.FromSelect&&e.selectedOptions&&e.selectedOptions.length>0||e.radio===be.NotApply||e.radio===be.SelectZero,Ct=e=>e?e.length===0?be.SelectZero:be.FromSelect:be.NotApply,Ae=(e,o,t)=>{const n=e.currentRoute.value.query[o.column],l=C(t);if(n instanceof Array)return l==null?void 0:l.filter(r=>n.includes(r.value));if(n){const r=l==null?void 0:l.find(a=>n===a.value);return r?[r]:void 0}if(n===null)return[]},Ir=()=>({selectedOptions:void 0,radio:Ct(void 0)}),Rr={class:"flex flex-col gap-y-4"},Fr=w({name:"FilterMultiSelectSwitch"}),un=w({...Fr,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),{isLoadingOptions:l,isLoadingOptionsError:r,options:a}=We(t.columnControl),s=g(Ko()),d=_e({radio:Ct(Ae(n,t.columnControl,a)),selectedOptions:Ae(n,t.columnControl,a)}),f={selectedOptions:tt.withMessage("require",()=>Or(d)),radio:{}},m=ze(f,d),p=y(()=>m.value.$error),c=()=>{d.selectedOptions=Ae(n,t.columnControl,a),d.radio=Ct(d.selectedOptions)},u=()=>Object.assign(d,Ir()),i=()=>({key:t.columnControl.column,value:Tr(d.radio,d.selectedOptions)});return j(a,()=>{d.selectedOptions=Ae(n,t.columnControl,a),d.radio=Ct(Ae(n,t.columnControl,a))}),o({type:t.columnControl.type,reset:c,validator:m,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:p,getQueryParam:i,clear:u}),(v,h)=>(b(),D("div",Rr,[v.columnControl.filterNotAppliedText?(b(),_(Le,{key:0,modelValue:d.radio,"onUpdate:modelValue":h[0]||(h[0]=k=>d.radio=k),"group-name":s.value,value:"NotApply",label:v.columnControl.filterNotAppliedText},null,8,["modelValue","group-name","label"])):z("",!0),v.columnControl.selectedZeroText?(b(),_(Le,{key:1,modelValue:d.radio,"onUpdate:modelValue":h[1]||(h[1]=k=>d.radio=k),"group-name":s.value,value:"SelectZero",label:v.columnControl.selectedZeroText},null,8,["modelValue","group-name","label"])):z("",!0),v.columnControl.selectedAllText?(b(),_(Le,{key:2,modelValue:d.radio,"onUpdate:modelValue":h[2]||(h[2]=k=>d.radio=k),"group-name":s.value,value:"NotApply",label:`${v.columnControl.selectedAllText} (${C(a).length})`},null,8,["modelValue","group-name","label"])):z("",!0),V(Le,{modelValue:d.radio,"onUpdate:modelValue":h[3]||(h[3]=k=>d.radio=k),"group-name":s.value,value:"FromSelect",label:"Выбрать из списка"},null,8,["modelValue","group-name"]),d.radio==="FromSelect"?(b(),_(bl,{key:3,"selected-options":d.selectedOptions??[],options:C(a),placeholder:v.columnControl.placeholder,"is-loading":C(l),"is-error":C(m).$error,"is-error-loading":C(r),size:C(ve).S,onVnodeMounted:h[4]||(h[4]=k=>C(m).$reset()),"onUpdate:selectedOptions":h[5]||(h[5]=k=>d.selectedOptions=k)},null,8,["selected-options","options","placeholder","is-loading","is-error","is-error-loading","size"])):z("",!0)]))}}),Pr=w({name:"ColumnFilterMultiSelectSwitch"}),Ar=w({...Pr,props:{columnControl:{},tableContainer:{}},setup(e,{expose:o}){const t=e,n=ne(),l=g(),r=g(),{options:a}=We(t.columnControl),{addNewQueryParamToUrl:s,queryParam:d}=io(n,t.columnControl),f=y(()=>{var u,i;return((u=l.value)==null?void 0:u.isDropDownShown)||(((i=Ae(n,t.columnControl,a))==null?void 0:i.length)??0)>0}),m=y(()=>{var u;return(u=l.value)==null?void 0:u.isDropDownShown}),p=()=>{var u;return s((u=r.value)==null?void 0:u.getQueryParam())},c=()=>{var u;(u=r.value)==null||u.clear(),p()};return o({isActive:f,type:t.columnControl.type,isDropDownShown:m,queryParam:d}),(u,i)=>{var v;return b(),_(ct,{ref_key:"filterBase",ref:l,icon:C(U).IconFilter,"is-active":f.value,validator:C((v=r.value)==null?void 0:v.validator),"table-container":u.tableContainer,"onOk:click":p,"onCross:click":c},{default:A(()=>[V(un,{ref_key:"filterMultiSelectSwitch",ref:r,"column-control":u.columnControl},null,8,["column-control"])]),_:1},8,["icon","is-active","validator","table-container"])}}}),dn=e=>e.filter(o=>o.type==="checkBox"),Lr=e=>e.some(o=>dn(o.cells).some(t=>t.isChecked)),Hr=e=>e.every(o=>dn(o.cells).every(t=>t.isChecked)),Br={name:"PortalTableBaseHeaderCellCheckBox"},Mr=w({...Br,props:{headerCellCheckBox:{required:!0},headerCellCheckBoxModifiers:{},rows:{required:!0},rowsModifiers:{}},emits:["update:headerCellCheckBox","update:rows"],setup(e){const o=et(e,"headerCellCheckBox"),t=et(e,"rows"),n=a=>{t.value=o.value.onCheck(a.isChecked,t.value)},l=y(()=>Lr(t.value)),r=y(()=>Hr(t.value));return j([l,r],()=>{o.value={...o.value,isChecked:r.value?!0:l.value?null:!1}}),(a,s)=>(b(),_(al,{"model-value":o.value,"onUpdate:modelValue":n},null,8,["model-value"]))}}),Nr={class:"flex flex-nowrap"},Ur={class:"grow overflow-hidden text-ellipsis"},jr={name:"PortalTableBaseHeaderCell"},Qr=w({...jr,props:kt({isHeaderCellHover:{type:Boolean},tableContainer:{}},{modelValue:{required:!0},modelModifiers:{},rows:{required:!0},rowsModifiers:{}}),emits:kt(["before:sort"],["update:modelValue","update:rows"]),setup(e,{expose:o,emit:t}){const n=et(e,"modelValue"),l=et(e,"rows"),r=t,a=g(),s=y(()=>{var u;const c=[];return(u=a.value)==null||u.forEach(i=>{if("isDropDownShown"in i&&i.queryParam!==void 0){const v=i.queryParam;v instanceof Array?c.push(...v.filter(h=>h)):c.push(v)}}),c}),d=y(()=>{var c;return!!((c=a.value)!=null&&c.length)&&a.value.some(u=>"isDropDownShown"in u&&!u.isDropDownShown)}),f=y(()=>{var c,u;return((c=a.value)==null?void 0:c.length)&&((u=a.value)==null?void 0:u.some(i=>i.isActive))}),m=c=>{var u,i;return!((i=(u=a.value)==null?void 0:u.at(c))!=null&&i.isActive)},p=(c,u)=>{var i,v;n.value={...n.value,controls:[...((i=n.value.controls)==null?void 0:i.slice(0,u))??[],c,...((v=n.value.controls)==null?void 0:v.slice(u+1))??[]]}};return o({queryParams:s}),(c,u)=>(b(),D("div",Nr,[T("div",Ur,[n.value.type==="text"?(b(),_(sl,{key:0,cell:n.value},null,8,["cell"])):n.value.type==="icon"?(b(),_(il,{key:1,cell:n.value},null,8,["cell"])):n.value.type==="checkBox"?(b(),_(Mr,{key:2,"header-cell-check-box":n.value,"onUpdate:headerCellCheckBox":u[0]||(u[0]=i=>n.value=i),rows:l.value,"onUpdate:rows":u[1]||(u[1]=i=>l.value=i)},null,8,["header-cell-check-box","rows"])):z("",!0)]),T("div",{class:B([c.isHeaderCellHover||f.value?"flex flex-nowrap":"hidden"])},[(b(!0),D(X,null,ke(n.value.controls,(i,v)=>(b(),D("div",{key:v,class:B([!c.isHeaderCellHover&&d.value&&m(v)?"hidden":"block"])},[i.type==="sort"?(b(),_(kr,{key:0,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"onUpdate:columnControl":h=>p(h,v),"onBefore:sort":u[2]||(u[2]=h=>r("before:sort"))},null,8,["column-control","onUpdate:columnControl"])):i.type==="filterSelectSwitch"?(b(),_(dr,{key:1,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"table-container":c.tableContainer,"onUpdate:columnControl":h=>p(h,v)},null,8,["column-control","table-container","onUpdate:columnControl"])):i.type==="filterMultiSelectSwitch"?(b(),_(Ar,{key:2,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"table-container":c.tableContainer,"onUpdate:columnControl":h=>p(h,v)},null,8,["column-control","table-container","onUpdate:columnControl"])):i.type==="filterNumberRange"?(b(),_(yr,{key:3,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"table-container":c.tableContainer,"onUpdate:columnControl":h=>p(h,v)},null,8,["column-control","table-container","onUpdate:columnControl"])):i.type==="filterDateRange"?(b(),_(Dr,{key:4,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"table-container":c.tableContainer,"onUpdate:columnControl":h=>p(h,v)},null,8,["column-control","table-container","onUpdate:columnControl"])):i.type==="filterSelect"?(b(),_(Cr,{key:5,ref_for:!0,ref_key:"columnControls",ref:a,"column-control":i,"table-container":c.tableContainer,"onUpdate:columnControl":h=>p(h,v)},null,8,["column-control","table-container","onUpdate:columnControl"])):z("",!0)],2))),128))],2)]))}}),qr=(e,o)=>{let t;return(...n)=>{t||(t=setTimeout(()=>{o(...n),clearTimeout(t),t=void 0},e))}},zr=(e,o,t,n)=>{const l=g(void 0),r=g(void 0),a=g(0),s=g(0),d=g(0);function f(v){d.value=Date.now(),l.value=v.clientX,r.value=v.clientY,a.value=0,s.value=0,t("before-swipe",l.value,r.value)}function m(v){d.value=Date.now(),l.value=v.touches[0].clientX,r.value=v.touches[0].clientY,a.value=0,s.value=0,t("before-swipe",l.value,r.value)}function p(v,h,k){l.value===void 0||r.value===void 0||(n&&v.preventDefault(),t("swiping",h,k),a.value=l.value-h,s.value=r.value-k,t("swiping:x",a.value),a.value>0?t("swiping:left",a.value):t("swiping:right",Math.abs(a.value)),t("swiping:y",s.value),s.value>0?t("swiping:up",s.value):t("swiping:down",Math.abs(s.value)))}function c(v){const h=v.touches[0].clientX,k=v.touches[0].clientY;p(v,h,k)}function u(v){const h=v.clientX,k=v.clientY;p(v,h,k)}function i(){if(Date.now()-d.value<=e){const h=Math.abs(a.value)>Math.abs(s.value);h&&Math.abs(a.value)>o?a.value>0?t("swiped:left"):t("swiped:right"):!h&&Math.abs(s.value)>o&&(s.value>0?t("swiped:up"):t("swiped:down"))}l.value=void 0,r.value=void 0,d.value=0,t("swiped:end")}return{handleTouchStart:m,handleMouseStart:f,handleTouchMove:c,handleMouseMove:u,handleTouchEnd:i}},Wr={name:"ModalWithSwipe"},cn=w({...Wr,props:{swipeThresholdPx:{default:50},swipeTimeoutMs:{default:500},swipeField:{default:void 0},swipeStartField:{default:void 0},isPreventDefault:{type:Boolean,default:!1}},emits:["before-swipe","swiping","swiping:x","swiping:left","swiping:right","swiping:y","swiping:up","swiping:down","swiped:left","swiped:right","swiped:up","swiped:down","swiped:end"],setup(e,{emit:o}){const t=e,n=o,{handleTouchStart:l,handleTouchMove:r,handleTouchEnd:a,handleMouseMove:s,handleMouseStart:d}=zr(t.swipeTimeoutMs,t.swipeThresholdPx,n,t.isPreventDefault);return G(()=>{var f,m,p,c,u,i;(f=t.swipeField)==null||f.addEventListener("touchmove",r,!1),(m=t.swipeField)==null||m.addEventListener("touchend",a,!1),(p=t.swipeStartField)==null||p.addEventListener("mousedown",d,!1),(c=t.swipeField)==null||c.addEventListener("mousemove",s,!1),(u=t.swipeField)==null||u.addEventListener("mouseup",a,!1),(i=t.swipeField)==null||i.addEventListener("mouseleave",a,!1)}),de(()=>{var f,m,p,c,u,i;(f=t.swipeField)==null||f.removeEventListener("touchmove",r,!1),(m=t.swipeField)==null||m.removeEventListener("touchend",a,!1),(p=t.swipeStartField)==null||p.removeEventListener("mousedown",d,!1),(c=t.swipeField)==null||c.removeEventListener("mousemove",s,!1),(u=t.swipeField)==null||u.removeEventListener("mouseup",a,!1),(i=t.swipeField)==null||i.removeEventListener("mouseleave",a,!1)}),j(()=>t.swipeField,()=>{var f,m,p,c,u;t.swipeField&&((f=t.swipeField)==null||f.addEventListener("touchmove",r,!1),(m=t.swipeField)==null||m.addEventListener("touchend",a,!1),(p=t.swipeField)==null||p.addEventListener("mousemove",s,!1),(c=t.swipeField)==null||c.addEventListener("mouseup",a,!1),(u=t.swipeField)==null||u.addEventListener("mouseleave",a,!1))}),j(()=>t.swipeStartField,()=>{var f,m;t.swipeStartField&&((f=t.swipeStartField)==null||f.addEventListener("touchstart",l,!1),(m=t.swipeStartField)==null||m.addEventListener("mousedown",d,!1))}),(f,m)=>fe(f.$slots,"default")}}),Gr=w({name:"PortalTableBaseHeaderDragger"}),Kr=w({...Gr,props:{cell:{},headerCell:{},swipeField:{},minWidth:{}},emits:["update:cell"],setup(e,{emit:o}){const t=e,n=o,l=g(),r=g(0),a=()=>{t.headerCell&&(r.value=t.cell.width??t.headerCell.getBoundingClientRect().width)},s=qr(Hl,d=>{const f=Math.max(r.value-d,t.minWidth??0);n("update:cell",{...t.cell,width:f})});return(d,f)=>(b(),_(cn,{"swipe-field":d.swipeField,"swipe-start-field":l.value,"is-prevent-default":"",onBeforeSwipe:a,"onSwiping:x":f[0]||(f[0]=m=>C(s)(m))},{default:A(()=>[T("div",{ref_key:"dragger",ref:l,class:"z-100 absolute bottom-0 right-0 top-0 w-4 translate-x-1/2 cursor-col-resize"},null,512)]),_:1},8,["swipe-field","swipe-start-field"]))}}),Yr=["rowspan","colspan","onMouseenter"],Xr=w({name:"PortalTableBaseHeader"}),Zr=w({...Xr,props:kt({header:{},isHeaderSticky:{type:Boolean,default:!1},tableRef:{},tableContainer:{default:void 0}},{rows:{required:!0},rowsModifiers:{}}),emits:kt(["update:header","change:header"],["update:rows"]),setup(e,{expose:o,emit:t}){const n=et(e,"rows"),l=e,r=t,a=g(),s=g(),d=g(),f=g(),m=y(()=>{var h;const v=[];return(h=f.value)==null||h.forEach((k,E)=>{v.push(...k.queryParams)}),v}),{setHeaderSticknessStatusListeners:p}=ul(a,v=>r("change:header",v)),c=(v,h,k)=>{const E=l.header;if(E instanceof Array){let P=E.at(h);P&&(P=Ao(P,v,k),r("update:header",Wo(P,h,E)))}else r("update:header",Ao(E,v,k))},u=()=>{l.header instanceof Array?r("update:header",l.header.map(v=>({...v,cells:v.cells.map(Fo)}))):r("update:header",{...l.header,cells:l.header.cells.map(Fo)})},i=(v,h)=>{const E=Kt(v.cells).map(P=>!P.isHidden).lastIndexOf(!0)??-1;return h===E};return G(()=>{if(l.isHeaderSticky&&p(),l.header instanceof Array){const v=l.header.map(h=>Po(h,d.value));r("update:header",v)}else r("update:header",Po(l.header,d.value))}),o({queryParams:m}),(v,h)=>(b(),D("thead",{ref_key:"headerRef",ref:a,class:B([v.isHeaderSticky&&"sticky top-0 z-10"])},[(b(!0),D(X,null,ke(v.header instanceof Array?v.header:[v.header],(k,E)=>{var P,W;return b(),D("tr",{key:E,class:B([((P=k.modifier)==null?void 0:P.textColor)??"text-grey-2",(W=k.modifier)==null?void 0:W.other]),onDragstartCapture:h[3]||(h[3]=Gn(()=>{},["prevent","stop"]))},[(b(!0),D(X,null,ke(C(Kt)(k.cells),(S,$)=>{var I,O,M,J,Fe,Pe,ee,we,le,re;return Kn((b(),D("th",{key:`${$}-${i(k,$)}-${S.index}-${(I=k.cells[$])==null?void 0:I.index}`,ref_for:!0,ref_key:"cells",ref:d,class:B(["relative box-border",((O=S.modifier)==null?void 0:O.text)??"font-normal",(M=S.modifier)==null?void 0:M.textColor,((J=S.modifier)==null?void 0:J.textAlign)??($===0?"text-left":"text-right"),((Fe=S.modifier)==null?void 0:Fe.width)??($===0?"w-auto":"w-53"),((Pe=S.modifier)==null?void 0:Pe.padding)??["py-4",$===0?"pl-0":"pl-8 md:pl-16"],(ee=S.modifier)==null?void 0:ee.border,(we=S.modifier)==null?void 0:we.other,(le=S.modifier)==null?void 0:le.verticalAlign]),rowspan:S.rowspan,colspan:S.colspan,style:Xn({width:`${S.isLastVisibleCell?void 0:S.width}px`,minWidth:`${S.isLastVisibleCell?void 0:S.width}px`}),onMouseenter:()=>s.value=$,onMouseleave:h[1]||(h[1]=()=>s.value=void 0),onFocusout:h[2]||(h[2]=()=>s.value=void 0)},[V(Qr,{ref_for:!0,ref_key:"portalTableBaseHeaderCells",ref:f,rows:n.value,"onUpdate:rows":h[0]||(h[0]=ae=>n.value=ae),"model-value":S,"is-header-cell-hover":$===s.value,"table-container":v.tableContainer,"onUpdate:modelValue":ae=>c(ae,E,$),"onBefore:sort":u},null,8,["rows","model-value","is-header-cell-hover","table-container","onUpdate:modelValue"]),$<k.cells.length-1?(b(),_(Kr,{key:0,"header-cell":(re=d.value)==null?void 0:re[$],cell:S,"swipe-field":v.tableRef,"min-width":S.minWidth,"onUpdate:cell":ae=>c(ae,E,$)},null,8,["header-cell","cell","swipe-field","min-width","onUpdate:cell"])):z("",!0)],46,Yr)),[[Yn,!S.isHidden]])}),128))],34)}),128))],2))}}),Jr={class:"overflow-x-auto scrollbar-thin"},ea=w({name:"PortalTableData"}),ta=w({...ea,props:{modelValue:{},tableContainer:{},isLoading:{type:Boolean},loadingConfig:{},showNoDataStub:{type:Boolean},noDataStubTexts:{},noDataStubHeight:{},stickyHeaderStubContainer:{}},emits:["update:modelValue","change:header"],setup(e,{expose:o,emit:t}){const n=e,l=lo(),r=t,a=g(),s=g(),d=y(()=>{var i;return(i=s.value)==null?void 0:i.tableRef}),f=y({get(){return n.modelValue.rows},set(i){r("update:modelValue",{...n.modelValue,rows:i})}}),m=y(()=>{var i;return(i=a.value)==null?void 0:i.queryParams}),p=y({get(){return n.modelValue.header},set(i){r("update:modelValue",{...n.modelValue,header:i})}}),c=y(()=>so(n.modelValue.header)),u=y(()=>{var i;return gt((i=c.value)==null?void 0:i.cells)});return o({tableRef:d,queryParams:m}),(i,v)=>(b(),D("div",Jr,[V(Jl,_t({ref_key:"tableBaseRef",ref:s},C(l),{table:i.modelValue}),{header:A(()=>[V(Zr,{ref_key:"portalTableBaseHeader",ref:a,header:p.value,"onUpdate:header":v[0]||(v[0]=h=>p.value=h),rows:f.value,"onUpdate:rows":v[1]||(v[1]=h=>f.value=h),"is-header-sticky":i.modelValue.isHeaderSticky,"table-ref":d.value,"table-container":i.tableContainer,"onChange:header":v[2]||(v[2]=h=>r("change:header",h))},null,8,["header","rows","is-header-sticky","table-ref","table-container"])]),default:A(()=>[!i.isLoading&&f.value.length?(b(),_(Yl,{key:0,modelValue:f.value,"onUpdate:modelValue":v[3]||(v[3]=h=>f.value=h),"column-settings":u.value},null,8,["modelValue","column-settings"])):z("",!0)]),afterTable:A(()=>[V(In,_t(n,{class:"rounded-none border-0 shadow-none"}),null,16)]),_:1},16,["table"])]))}}),oa=w({name:"PortalTable"}),na=w({...oa,props:{modelValue:{},tableContainer:{},isLoading:{type:Boolean},loadingConfig:{},showNoDataStub:{type:Boolean},noDataStubTexts:{},noDataStubHeight:{},stickyHeaderStubContainer:{default:()=>document.body}},emits:["update:modelValue"],setup(e,{expose:o,emit:t}){const n=e,l=g(),r=y(()=>{var m;return(m=l.value)==null?void 0:m.tableRef}),a=lo(),s=y(()=>{var m;return(m=l.value)==null?void 0:m.queryParams}),d=t,f=y({get(){return n.modelValue},set(m){d("update:modelValue",m)}});return o({tableRef:r,queryParams:s}),(m,p)=>(b(),_(ta,_t({ref_key:"tableDataRef",ref:l},{...n,...C(a)},{modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=c=>f.value=c)}),null,16,["modelValue"]))}}),la=w({name:"DragAndDrop"}),ra=w({...la,props:{swipeField:{}},emits:["swiping","swiped:end"],setup(e,{emit:o}){const t=e,n=o,l=g(),r=g(),a=g(!1),s=g({x:0,y:0}),d=(p,c)=>{if(l.value){const u=l.value.getBoundingClientRect();l.value.style.width=`${u.width}px`,l.value.style.height=`${u.height}px`,s.value.x=p-u.x,s.value.y=c-u.y}},f=(p,c)=>{var h;a.value||(a.value=!0);const u=(h=t.swipeField)==null?void 0:h.getBoundingClientRect(),i=p-s.value.x-((u==null?void 0:u.x)??0),v=c-s.value.y-((u==null?void 0:u.y)??0);if(l.value){l.value.style.left=`${i}px`,l.value.style.top=`${v}px`;const k=i+Oo(l.value.style.width),E=v+Oo(l.value.style.height);n("swiping",{x:i,y:v},{x:k,y:E})}},m=()=>{a.value&&(l.value&&(l.value.style.left="",l.value.style.top=""),a.value=!1,n("swiped:end"))};return j(r,()=>{if(r.value&&l.value){const p=l.value.getBoundingClientRect();r.value.style.width=`${p.width}px`,r.value.style.height=`${p.height}px`}}),(p,c)=>(b(),_(cn,{"swipe-field":p.swipeField,"swipe-start-field":l.value,"is-prevent-default":"",onBeforeSwipe:c[0]||(c[0]=(u,i)=>d(u,i)),onSwiping:c[1]||(c[1]=(u,i)=>f(u,i)),"onSwiped:end":m},{default:A(()=>[T("div",{ref_key:"contentRef",ref:l,class:B(["cursor-pointer",a.value&&"absolute"])},[fe(p.$slots,"default",{isSwiping:a.value})],2),a.value?(b(),D("div",{key:0,ref_key:"stub",ref:r},[fe(p.$slots,"stub")],512)):z("",!0)]),_:3},8,["swipe-field","swipe-start-field"]))}}),aa={class:"flex justify-between py-3"},sa={class:"flex items-center gap-x-2"},ia=w({name:"PortalTableSetting"}),ua=w({...ia,props:{modelValue:{}},emits:["update:modelValue"],setup(e,{expose:o,emit:t}){const n=e,l=t,r=y({get(){return!n.modelValue.isHidden},set(d){l("update:modelValue",{...n.modelValue,isHidden:!d})}}),a=y(()=>n.modelValue.isHidden!==n.modelValue.isHiddenInitially||n.modelValue.index!==n.modelValue.initialIndex);return o({isChanged:a,reset:()=>{l("update:modelValue",{...n.modelValue,isHidden:n.modelValue.isHiddenInitially,index:n.modelValue.initialIndex})}}),(d,f)=>(b(),D("div",aa,[T("div",sa,[V(Dt,{icon:C(U).IconColumn,size:20,class:"text-blueGrey-2"},null,8,["icon"]),T("span",null,ro(d.modelValue.title),1)]),V(vl,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=m=>r.value=m),"is-disabled":d.modelValue.isDisabled},null,8,["modelValue","is-disabled"])]))}});function uo(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(o=>setTimeout(()=>{throw o}))}function pt(){let e=[],o={addEventListener(t,n,l,r){return t.addEventListener(n,l,r),o.add(()=>t.removeEventListener(n,l,r))},requestAnimationFrame(...t){let n=requestAnimationFrame(...t);o.add(()=>cancelAnimationFrame(n))},nextFrame(...t){o.requestAnimationFrame(()=>{o.requestAnimationFrame(...t)})},setTimeout(...t){let n=setTimeout(...t);o.add(()=>clearTimeout(n))},microTask(...t){let n={current:!0};return uo(()=>{n.current&&t[0]()}),o.add(()=>{n.current=!1})},style(t,n,l){let r=t.style.getPropertyValue(n);return Object.assign(t.style,{[n]:l}),this.add(()=>{Object.assign(t.style,{[n]:r})})},group(t){let n=pt();return t(n),this.add(()=>n.dispose())},add(t){return e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let l of e.splice(n,1))l()}},dispose(){for(let t of e.splice(0))t()}};return o}let da=Symbol("headlessui.useid"),ca=0;function Ot(){return oe(da,()=>`${++ca}`)()}function q(e){var o;if(e==null||e.value==null)return null;let t=(o=e.value.$el)!=null?o:e.value;return t instanceof Node?t:null}function he(e,o,...t){if(e in o){let l=o[e];return typeof l=="function"?l(...t):l}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(o).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,he),n}var pa=Object.defineProperty,fa=(e,o,t)=>o in e?pa(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,Ho=(e,o,t)=>(fa(e,typeof o!="symbol"?o+"":o,t),t);let ma=class{constructor(){Ho(this,"current",this.detect()),Ho(this,"currentId",0)}set(o){this.current!==o&&(this.currentId=0,this.current=o)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},ft=new ma;function Ge(e){if(ft.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let o=q(e);if(o)return o.ownerDocument}return document}let Xt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ce=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Ce||{}),pn=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(pn||{}),va=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(va||{});function ha(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Xt)).sort((o,t)=>Math.sign((o.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var fn=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(fn||{});function ya(e,o=0){var t;return e===((t=Ge(e))==null?void 0:t.body)?!1:he(o,{0(){return e.matches(Xt)},1(){let n=e;for(;n!==null;){if(n.matches(Xt))return!0;n=n.parentElement}return!1}})}var ga=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ga||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Re(e){e==null||e.focus({preventScroll:!0})}let ba=["textarea","input"].join(",");function wa(e){var o,t;return(t=(o=e==null?void 0:e.matches)==null?void 0:o.call(e,ba))!=null?t:!1}function Ca(e,o=t=>t){return e.slice().sort((t,n)=>{let l=o(t),r=o(n);if(l===null||r===null)return 0;let a=l.compareDocumentPosition(r);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function xt(e,o,{sorted:t=!0,relativeTo:n=null,skipElements:l=[]}={}){var r;let a=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,s=Array.isArray(e)?t?Ca(e):e:ha(e);l.length>0&&s.length>1&&(s=s.filter(i=>!l.includes(i))),n=n??a.activeElement;let d=(()=>{if(o&5)return 1;if(o&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=(()=>{if(o&1)return 0;if(o&2)return Math.max(0,s.indexOf(n))-1;if(o&4)return Math.max(0,s.indexOf(n))+1;if(o&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=o&32?{preventScroll:!0}:{},p=0,c=s.length,u;do{if(p>=c||p+c<=0)return 0;let i=f+p;if(o&16)i=(i+c)%c;else{if(i<0)return 3;if(i>=c)return 1}u=s[i],u==null||u.focus(m),p+=d}while(u!==a.activeElement);return o&6&&wa(u)&&u.select(),2}function mn(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function xa(){return/Android/gi.test(window.navigator.userAgent)}function Sa(){return mn()||xa()}function vt(e,o,t){ft.isServer||ce(n=>{document.addEventListener(e,o,t),n(()=>document.removeEventListener(e,o,t))})}function vn(e,o,t){ft.isServer||ce(n=>{window.addEventListener(e,o,t),n(()=>window.removeEventListener(e,o,t))})}function ka(e,o,t=y(()=>!0)){function n(r,a){if(!t.value||r.defaultPrevented)return;let s=a(r);if(s===null||!s.getRootNode().contains(s))return;let d=function f(m){return typeof m=="function"?f(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let f of d){if(f===null)continue;let m=f instanceof HTMLElement?f:q(f);if(m!=null&&m.contains(s)||r.composed&&r.composedPath().includes(m))return}return!ya(s,fn.Loose)&&s.tabIndex!==-1&&r.preventDefault(),o(r,s)}let l=g(null);vt("pointerdown",r=>{var a,s;t.value&&(l.value=((s=(a=r.composedPath)==null?void 0:a.call(r))==null?void 0:s[0])||r.target)},!0),vt("mousedown",r=>{var a,s;t.value&&(l.value=((s=(a=r.composedPath)==null?void 0:a.call(r))==null?void 0:s[0])||r.target)},!0),vt("click",r=>{Sa()||l.value&&(n(r,()=>l.value),l.value=null)},!0),vt("touchend",r=>n(r,()=>r.target instanceof HTMLElement?r.target:null),!0),vn("blur",r=>n(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var $t=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))($t||{}),Se=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Se||{});function ye({visible:e=!0,features:o=0,ourProps:t,theirProps:n,...l}){var r;let a=yn(n,t),s=Object.assign(l,{props:a});if(e||o&2&&a.static)return Pt(s);if(o&1){let d=(r=a.unmount)==null||r?0:1;return he(d,{0(){return null},1(){return Pt({...l,props:{...a,hidden:!0,style:{display:"none"}}})}})}return Pt(s)}function Pt({props:e,attrs:o,slots:t,slot:n,name:l}){var r,a;let{as:s,...d}=gn(e,["unmount","static"]),f=(r=t.default)==null?void 0:r.call(t,n),m={};if(n){let p=!1,c=[];for(let[u,i]of Object.entries(n))typeof i=="boolean"&&(p=!0),i===!0&&c.push(u);p&&(m["data-headlessui-state"]=c.join(" "))}if(s==="template"){if(f=hn(f??[]),Object.keys(d).length>0||Object.keys(o).length>0){let[p,...c]=f??[];if(!_a(p)||c.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(d).concat(Object.keys(o)).map(v=>v.trim()).filter((v,h,k)=>k.indexOf(v)===h).sort((v,h)=>v.localeCompare(h)).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`));let u=yn((a=p.props)!=null?a:{},d,m),i=Zn(p,u,!0);for(let v in u)v.startsWith("on")&&(i.props||(i.props={}),i.props[v]=u[v]);return i}return Array.isArray(f)&&f.length===1?f[0]:f}return Y(s,Object.assign({},d,m),{default:()=>f})}function hn(e){return e.flatMap(o=>o.type===X?hn(o.children):[o])}function yn(...e){if(e.length===0)return{};if(e.length===1)return e[0];let o={},t={};for(let n of e)for(let l in n)l.startsWith("on")&&typeof n[l]=="function"?(t[l]!=null||(t[l]=[]),t[l].push(n[l])):o[l]=n[l];if(o.disabled||o["aria-disabled"])return Object.assign(o,Object.fromEntries(Object.keys(t).map(n=>[n,void 0])));for(let n in t)Object.assign(o,{[n](l,...r){let a=t[n];for(let s of a){if(l instanceof Event&&l.defaultPrevented)return;s(l,...r)}}});return o}function gn(e,o=[]){let t=Object.assign({},e);for(let n of o)n in t&&delete t[n];return t}function _a(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Et=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Et||{});let Zt=w({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:o,attrs:t}){return()=>{var n;let{features:l,...r}=e,a={"aria-hidden":(l&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(l&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(l&4)===4&&(l&2)!==2&&{display:"none"}}};return ye({ourProps:a,theirProps:r,slot:{},attrs:t,slots:o,name:"Hidden"})}}}),bn=Symbol("Context");var te=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(te||{});function $a(){return co()!==null}function co(){return oe(bn,null)}function Ea(e){me(bn,e)}var wn=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(wn||{});function Va(e){function o(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",o))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",o),o())}let Ee=[];Va(()=>{function e(o){o.target instanceof HTMLElement&&o.target!==document.body&&Ee[0]!==o.target&&(Ee.unshift(o.target),Ee=Ee.filter(t=>t!=null&&t.isConnected),Ee.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Cn(e,o,t,n){ft.isServer||ce(l=>{e=e??window,e.addEventListener(o,t,n),l(()=>e.removeEventListener(o,t,n))})}var Ze=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ze||{});function Da(){let e=g(0);return vn("keydown",o=>{o.key==="Tab"&&(e.value=o.shiftKey?1:0)}),e}function xn(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let o=new Set;for(let t of e.value){let n=q(t);n instanceof HTMLElement&&o.add(n)}return o}var Sn=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Sn||{});let Ke=Object.assign(w({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:g(new Set)}},inheritAttrs:!1,setup(e,{attrs:o,slots:t,expose:n}){let l=g(null);n({el:l,$el:l});let r=y(()=>Ge(l)),a=g(!1);G(()=>a.value=!0),de(()=>a.value=!1),Oa({ownerDocument:r},y(()=>a.value&&!!(e.features&16)));let s=Ia({ownerDocument:r,container:l,initialFocus:y(()=>e.initialFocus)},y(()=>a.value&&!!(e.features&2)));Ra({ownerDocument:r,container:l,containers:e.containers,previousActiveElement:s},y(()=>a.value&&!!(e.features&8)));let d=Da();function f(u){let i=q(l);i&&(v=>v())(()=>{he(d.value,{[Ze.Forwards]:()=>{xt(i,Ce.First,{skipElements:[u.relatedTarget]})},[Ze.Backwards]:()=>{xt(i,Ce.Last,{skipElements:[u.relatedTarget]})}})})}let m=g(!1);function p(u){u.key==="Tab"&&(m.value=!0,requestAnimationFrame(()=>{m.value=!1}))}function c(u){if(!a.value)return;let i=xn(e.containers);q(l)instanceof HTMLElement&&i.add(q(l));let v=u.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(kn(i,v)||(m.value?xt(q(l),he(d.value,{[Ze.Forwards]:()=>Ce.Next,[Ze.Backwards]:()=>Ce.Previous})|Ce.WrapAround,{relativeTo:u.target}):u.target instanceof HTMLElement&&Re(u.target)))}return()=>{let u={},i={ref:l,onKeydown:p,onFocusout:c},{features:v,initialFocus:h,containers:k,...E}=e;return Y(X,[!!(v&4)&&Y(Zt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Et.Focusable}),ye({ourProps:i,theirProps:{...o,...E},slot:u,attrs:o,slots:t,name:"FocusTrap"}),!!(v&4)&&Y(Zt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Et.Focusable})])}}}),{features:Sn});function Ta(e){let o=g(Ee.slice());return j([e],([t],[n])=>{n===!0&&t===!1?uo(()=>{o.value.splice(0)}):n===!1&&t===!0&&(o.value=Ee.slice())},{flush:"post"}),()=>{var t;return(t=o.value.find(n=>n!=null&&n.isConnected))!=null?t:null}}function Oa({ownerDocument:e},o){let t=Ta(o);G(()=>{ce(()=>{var n,l;o.value||((n=e.value)==null?void 0:n.activeElement)===((l=e.value)==null?void 0:l.body)&&Re(t())},{flush:"post"})}),de(()=>{o.value&&Re(t())})}function Ia({ownerDocument:e,container:o,initialFocus:t},n){let l=g(null),r=g(!1);return G(()=>r.value=!0),de(()=>r.value=!1),G(()=>{j([o,t,n],(a,s)=>{if(a.every((f,m)=>(s==null?void 0:s[m])===f)||!n.value)return;let d=q(o);d&&uo(()=>{var f,m;if(!r.value)return;let p=q(t),c=(f=e.value)==null?void 0:f.activeElement;if(p){if(p===c){l.value=c;return}}else if(d.contains(c)){l.value=c;return}p?Re(p):xt(d,Ce.First|Ce.NoScroll)===pn.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.value=(m=e.value)==null?void 0:m.activeElement})},{immediate:!0,flush:"post"})}),l}function Ra({ownerDocument:e,container:o,containers:t,previousActiveElement:n},l){var r;Cn((r=e.value)==null?void 0:r.defaultView,"focus",a=>{if(!l.value)return;let s=xn(t);q(o)instanceof HTMLElement&&s.add(q(o));let d=n.value;if(!d)return;let f=a.target;f&&f instanceof HTMLElement?kn(s,f)?(n.value=f,Re(f)):(a.preventDefault(),a.stopPropagation(),Re(d)):Re(n.value)},!0)}function kn(e,o){for(let t of e)if(t.contains(o))return!0;return!1}function Fa(e){let o=Jn(e.getSnapshot());return de(e.subscribe(()=>{o.value=e.getSnapshot()})),o}function Pa(e,o){let t=e(),n=new Set;return{getSnapshot(){return t},subscribe(l){return n.add(l),()=>n.delete(l)},dispatch(l,...r){let a=o[l].call(t,...r);a&&(t=a,n.forEach(s=>s()))}}}function Aa(){let e;return{before({doc:o}){var t;let n=o.documentElement;e=((t=o.defaultView)!=null?t:window).innerWidth-n.clientWidth},after({doc:o,d:t}){let n=o.documentElement,l=n.clientWidth-n.offsetWidth,r=e-l;t.style(n,"paddingRight",`${r}px`)}}}function La(){return mn()?{before({doc:e,d:o,meta:t}){function n(l){return t.containers.flatMap(r=>r()).some(r=>r.contains(l))}o.microTask(()=>{var l;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let s=pt();s.style(e.documentElement,"scrollBehavior","auto"),o.add(()=>o.microTask(()=>s.dispose()))}let r=(l=window.scrollY)!=null?l:window.pageYOffset,a=null;o.addEventListener(e,"click",s=>{if(s.target instanceof HTMLElement)try{let d=s.target.closest("a");if(!d)return;let{hash:f}=new URL(d.href),m=e.querySelector(f);m&&!n(m)&&(a=m)}catch{}},!0),o.addEventListener(e,"touchstart",s=>{if(s.target instanceof HTMLElement)if(n(s.target)){let d=s.target;for(;d.parentElement&&n(d.parentElement);)d=d.parentElement;o.style(d,"overscrollBehavior","contain")}else o.style(s.target,"touchAction","none")}),o.addEventListener(e,"touchmove",s=>{if(s.target instanceof HTMLElement){if(s.target.tagName==="INPUT")return;if(n(s.target)){let d=s.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&s.preventDefault()}else s.preventDefault()}},{passive:!1}),o.add(()=>{var s;let d=(s=window.scrollY)!=null?s:window.pageYOffset;r!==d&&window.scrollTo(0,r),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Ha(){return{before({doc:e,d:o}){o.style(e.documentElement,"overflow","hidden")}}}function Ba(e){let o={};for(let t of e)Object.assign(o,t(o));return o}let Ve=Pa(()=>new Map,{PUSH(e,o){var t;let n=(t=this.get(e))!=null?t:{doc:e,count:0,d:pt(),meta:new Set};return n.count++,n.meta.add(o),this.set(e,n),this},POP(e,o){let t=this.get(e);return t&&(t.count--,t.meta.delete(o)),this},SCROLL_PREVENT({doc:e,d:o,meta:t}){let n={doc:e,d:o,meta:Ba(t)},l=[La(),Aa(),Ha()];l.forEach(({before:r})=>r==null?void 0:r(n)),l.forEach(({after:r})=>r==null?void 0:r(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ve.subscribe(()=>{let e=Ve.getSnapshot(),o=new Map;for(let[t]of e)o.set(t,t.documentElement.style.overflow);for(let t of e.values()){let n=o.get(t.doc)==="hidden",l=t.count!==0;(l&&!n||!l&&n)&&Ve.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&Ve.dispatch("TEARDOWN",t)}});function Ma(e,o,t){let n=Fa(Ve),l=y(()=>{let r=e.value?n.value.get(e.value):void 0;return r?r.count>0:!1});return j([e,o],([r,a],[s],d)=>{if(!r||!a)return;Ve.dispatch("PUSH",r,t);let f=!1;d(()=>{f||(Ve.dispatch("POP",s??r,t),f=!0)})},{immediate:!0}),l}let At=new Map,Ye=new Map;function Bo(e,o=g(!0)){ce(t=>{var n;if(!o.value)return;let l=q(e);if(!l)return;t(function(){var a;if(!l)return;let s=(a=Ye.get(l))!=null?a:1;if(s===1?Ye.delete(l):Ye.set(l,s-1),s!==1)return;let d=At.get(l);d&&(d["aria-hidden"]===null?l.removeAttribute("aria-hidden"):l.setAttribute("aria-hidden",d["aria-hidden"]),l.inert=d.inert,At.delete(l))});let r=(n=Ye.get(l))!=null?n:0;Ye.set(l,r+1),r===0&&(At.set(l,{"aria-hidden":l.getAttribute("aria-hidden"),inert:l.inert}),l.setAttribute("aria-hidden","true"),l.inert=!0)})}function Na({defaultContainers:e=[],portals:o,mainTreeNodeRef:t}={}){let n=g(null),l=Ge(n);function r(){var a,s,d;let f=[];for(let m of e)m!==null&&(m instanceof HTMLElement?f.push(m):"value"in m&&m.value instanceof HTMLElement&&f.push(m.value));if(o!=null&&o.value)for(let m of o.value)f.push(m);for(let m of(a=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?a:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(q(n))||m.contains((d=(s=q(n))==null?void 0:s.getRootNode())==null?void 0:d.host)||f.some(p=>m.contains(p))||f.push(m));return f}return{resolveContainers:r,contains(a){return r().some(s=>s.contains(a))},mainTreeNodeRef:n,MainTreeNode(){return t!=null?null:Y(Zt,{features:Et.Hidden,ref:n})}}}let _n=Symbol("ForcePortalRootContext");function Ua(){return oe(_n,!1)}let Mo=w({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:o,attrs:t}){return me(_n,e.force),()=>{let{force:n,...l}=e;return ye({theirProps:l,ourProps:{},slot:{},slots:o,attrs:t,name:"ForcePortalRoot"})}}}),$n=Symbol("StackContext");var Jt=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Jt||{});function ja(){return oe($n,()=>{})}function Qa({type:e,enabled:o,element:t,onUpdate:n}){let l=ja();function r(...a){n==null||n(...a),l(...a)}G(()=>{j(o,(a,s)=>{a?r(0,e,t):s===!0&&r(1,e,t)},{immediate:!0,flush:"sync"})}),de(()=>{o.value&&r(1,e,t)}),me($n,r)}let qa=Symbol("DescriptionContext");function za({slot:e=g({}),name:o="Description",props:t={}}={}){let n=g([]);function l(r){return n.value.push(r),()=>{let a=n.value.indexOf(r);a!==-1&&n.value.splice(a,1)}}return me(qa,{register:l,slot:e,name:o,props:t}),y(()=>n.value.length>0?n.value.join(" "):void 0)}function Wa(e){let o=Ge(e);if(!o){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let t=o.getElementById("headlessui-portal-root");if(t)return t;let n=o.createElement("div");return n.setAttribute("id","headlessui-portal-root"),o.body.appendChild(n)}const eo=new WeakMap;function Ga(e){var o;return(o=eo.get(e))!=null?o:0}function No(e,o){let t=o(Ga(e));return t<=0?eo.delete(e):eo.set(e,t),t}let Ka=w({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:o,attrs:t}){let n=g(null),l=y(()=>Ge(n)),r=Ua(),a=oe(En,null),s=g(r===!0||a==null?Wa(n.value):a.resolveTarget());s.value&&No(s.value,c=>c+1);let d=g(!1);G(()=>{d.value=!0}),ce(()=>{r||a!=null&&(s.value=a.resolveTarget())});let f=oe(to,null),m=!1,p=el();return j(n,()=>{if(m||!f)return;let c=q(n);c&&(de(f.register(c),p),m=!0)}),de(()=>{var c,u;let i=(c=l.value)==null?void 0:c.getElementById("headlessui-portal-root");!i||s.value!==i||No(s.value,v=>v-1)||s.value.children.length>0||(u=s.value.parentElement)==null||u.removeChild(s.value)}),()=>{if(!d.value||s.value===null)return null;let c={ref:n,"data-headlessui-portal":""};return Y(tl,{to:s.value},ye({ourProps:c,theirProps:e,slot:{},attrs:t,slots:o,name:"Portal"}))}}}),to=Symbol("PortalParentContext");function Ya(){let e=oe(to,null),o=g([]);function t(r){return o.value.push(r),e&&e.register(r),()=>n(r)}function n(r){let a=o.value.indexOf(r);a!==-1&&o.value.splice(a,1),e&&e.unregister(r)}let l={register:t,unregister:n,portals:o};return[o,w({name:"PortalWrapper",setup(r,{slots:a}){return me(to,l),()=>{var s;return(s=a.default)==null?void 0:s.call(a)}}})]}let En=Symbol("PortalGroupContext"),Xa=w({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:o,slots:t}){let n=_e({resolveTarget(){return e.target}});return me(En,n),()=>{let{target:l,...r}=e;return ye({theirProps:r,ourProps:{},slot:{},attrs:o,slots:t,name:"PortalGroup"})}}});var Za=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Za||{});let oo=Symbol("DialogContext");function po(e){let o=oe(oo,null);if(o===null){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,po),t}return o}let ht="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Ja=w({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:ht},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:o,attrs:t,slots:n,expose:l}){var r,a;let s=(r=e.id)!=null?r:`headlessui-dialog-${Ot()}`,d=g(!1);G(()=>{d.value=!0});let f=!1,m=y(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(f||(f=!0,console.warn(`Invalid role [${m}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),p=g(0),c=co(),u=y(()=>e.open===ht&&c!==null?(c.value&te.Open)===te.Open:e.open),i=g(null),v=y(()=>Ge(i));if(l({el:i,$el:i}),!(e.open!==ht||c!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof u.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===ht?void 0:e.open}`);let h=y(()=>d.value&&u.value?0:1),k=y(()=>h.value===0),E=y(()=>p.value>1),P=oe(oo,null)!==null,[W,S]=Ya(),{resolveContainers:$,mainTreeNodeRef:I,MainTreeNode:O}=Na({portals:W,defaultContainers:[y(()=>{var R;return(R=ae.panelRef.value)!=null?R:i.value})]}),M=y(()=>E.value?"parent":"leaf"),J=y(()=>c!==null?(c.value&te.Closing)===te.Closing:!1),Fe=y(()=>P||J.value?!1:k.value),Pe=y(()=>{var R,N,se;return(se=Array.from((N=(R=v.value)==null?void 0:R.querySelectorAll("body > *"))!=null?N:[]).find(ie=>ie.id==="headlessui-portal-root"?!1:ie.contains(q(I))&&ie instanceof HTMLElement))!=null?se:null});Bo(Pe,Fe);let ee=y(()=>E.value?!0:k.value),we=y(()=>{var R,N,se;return(se=Array.from((N=(R=v.value)==null?void 0:R.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(ie=>ie.contains(q(I))&&ie instanceof HTMLElement))!=null?se:null});Bo(we,ee),Qa({type:"Dialog",enabled:y(()=>h.value===0),element:i,onUpdate:(R,N)=>{if(N==="Dialog")return he(R,{[Jt.Add]:()=>p.value+=1,[Jt.Remove]:()=>p.value-=1})}});let le=za({name:"DialogDescription",slot:y(()=>({open:u.value}))}),re=g(null),ae={titleId:re,panelRef:g(null),dialogState:h,setTitleId(R){re.value!==R&&(re.value=R)},close(){o("close",!1)}};me(oo,ae);let ho=y(()=>!(!k.value||E.value));ka($,(R,N)=>{R.preventDefault(),ae.close(),Bt(()=>N==null?void 0:N.focus())},ho);let yo=y(()=>!(E.value||h.value!==0));Cn((a=v.value)==null?void 0:a.defaultView,"keydown",R=>{yo.value&&(R.defaultPrevented||R.key===wn.Escape&&(R.preventDefault(),R.stopPropagation(),ae.close()))});let go=y(()=>!(J.value||h.value!==0||P));return Ma(v,go,R=>{var N;return{containers:[...(N=R.containers)!=null?N:[],$]}}),ce(R=>{if(h.value!==0)return;let N=q(i);if(!N)return;let se=new ResizeObserver(ie=>{for(let Rt of ie){let mt=Rt.target.getBoundingClientRect();mt.x===0&&mt.y===0&&mt.width===0&&mt.height===0&&ae.close()}});se.observe(N),R(()=>se.disconnect())}),()=>{let{open:R,initialFocus:N,...se}=e,ie={...t,ref:i,id:s,role:m.value,"aria-modal":h.value===0?!0:void 0,"aria-labelledby":re.value,"aria-describedby":le.value},Rt={open:h.value===0};return Y(Mo,{force:!0},()=>[Y(Ka,()=>Y(Xa,{target:i.value},()=>Y(Mo,{force:!1},()=>Y(Ke,{initialFocus:N,containers:$,features:k.value?he(M.value,{parent:Ke.features.RestoreFocus,leaf:Ke.features.All&~Ke.features.FocusLock}):Ke.features.None},()=>Y(S,{},()=>ye({ourProps:ie,theirProps:{...se,...t},slot:Rt,attrs:t,slots:n,visible:h.value===0,features:$t.RenderStrategy|$t.Static,name:"Dialog"})))))),Y(O)])}}}),es=w({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:o,slots:t,expose:n}){var l;let r=(l=e.id)!=null?l:`headlessui-dialog-panel-${Ot()}`,a=po("DialogPanel");n({el:a.panelRef,$el:a.panelRef});function s(d){d.stopPropagation()}return()=>{let{...d}=e,f={id:r,ref:a.panelRef,onClick:s};return ye({ourProps:f,theirProps:d,slot:{open:a.dialogState.value===0},attrs:o,slots:t,name:"DialogPanel"})}}}),ts=w({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:o,slots:t}){var n;let l=(n=e.id)!=null?n:`headlessui-dialog-title-${Ot()}`,r=po("DialogTitle");return G(()=>{r.setTitleId(l),de(()=>r.setTitleId(null))}),()=>{let{...a}=e;return ye({ourProps:{id:l},theirProps:a,slot:{open:r.dialogState.value===0},attrs:o,slots:t,name:"DialogTitle"})}}});function os(e){let o={called:!1};return(...t)=>{if(!o.called)return o.called=!0,e(...t)}}function Lt(e,...o){e&&o.length>0&&e.classList.add(...o)}function yt(e,...o){e&&o.length>0&&e.classList.remove(...o)}var no=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(no||{});function ns(e,o){let t=pt();if(!e)return t.dispose;let{transitionDuration:n,transitionDelay:l}=getComputedStyle(e),[r,a]=[n,l].map(s=>{let[d=0]=s.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,m)=>m-f);return d});return r!==0?t.setTimeout(()=>o("finished"),r+a):o("finished"),t.add(()=>o("cancelled")),t.dispose}function Uo(e,o,t,n,l,r){let a=pt(),s=r!==void 0?os(r):()=>{};return yt(e,...l),Lt(e,...o,...t),a.nextFrame(()=>{yt(e,...t),Lt(e,...n),a.add(ns(e,d=>(yt(e,...n,...o),Lt(e,...l),s(d))))}),a.add(()=>yt(e,...o,...t,...n,...l)),a.add(()=>s("cancelled")),a.dispose}function $e(e=""){return e.split(/\s+/).filter(o=>o.length>1)}let fo=Symbol("TransitionContext");var ls=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ls||{});function rs(){return oe(fo,null)!==null}function as(){let e=oe(fo,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function ss(){let e=oe(mo,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let mo=Symbol("NestingContext");function It(e){return"children"in e?It(e.children):e.value.filter(({state:o})=>o==="visible").length>0}function Vn(e){let o=g([]),t=g(!1);G(()=>t.value=!0),de(()=>t.value=!1);function n(r,a=Se.Hidden){let s=o.value.findIndex(({id:d})=>d===r);s!==-1&&(he(a,{[Se.Unmount](){o.value.splice(s,1)},[Se.Hidden](){o.value[s].state="hidden"}}),!It(o)&&t.value&&(e==null||e()))}function l(r){let a=o.value.find(({id:s})=>s===r);return a?a.state!=="visible"&&(a.state="visible"):o.value.push({id:r,state:"visible"}),()=>n(r,Se.Unmount)}return{children:o,register:l,unregister:n}}let Dn=$t.RenderStrategy,vo=w({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:o,attrs:t,slots:n,expose:l}){let r=g(0);function a(){r.value|=te.Opening,o("beforeEnter")}function s(){r.value&=~te.Opening,o("afterEnter")}function d(){r.value|=te.Closing,o("beforeLeave")}function f(){r.value&=~te.Closing,o("afterLeave")}if(!rs()&&$a())return()=>Y(Tn,{...e,onBeforeEnter:a,onAfterEnter:s,onBeforeLeave:d,onAfterLeave:f},n);let m=g(null),p=y(()=>e.unmount?Se.Unmount:Se.Hidden);l({el:m,$el:m});let{show:c,appear:u}=as(),{register:i,unregister:v}=ss(),h=g(c.value?"visible":"hidden"),k={value:!0},E=Ot(),P={value:!1},W=Vn(()=>{!P.value&&h.value!=="hidden"&&(h.value="hidden",v(E),f())});G(()=>{let ee=i(E);de(ee)}),ce(()=>{if(p.value===Se.Hidden&&E){if(c.value&&h.value!=="visible"){h.value="visible";return}he(h.value,{hidden:()=>v(E),visible:()=>i(E)})}});let S=$e(e.enter),$=$e(e.enterFrom),I=$e(e.enterTo),O=$e(e.entered),M=$e(e.leave),J=$e(e.leaveFrom),Fe=$e(e.leaveTo);G(()=>{ce(()=>{if(h.value==="visible"){let ee=q(m);if(ee instanceof Comment&&ee.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Pe(ee){let we=k.value&&!u.value,le=q(m);!le||!(le instanceof HTMLElement)||we||(P.value=!0,c.value&&a(),c.value||d(),ee(c.value?Uo(le,S,$,I,O,re=>{P.value=!1,re===no.Finished&&s()}):Uo(le,M,J,Fe,O,re=>{P.value=!1,re===no.Finished&&(It(W)||(h.value="hidden",v(E),f()))})))}return G(()=>{j([c],(ee,we,le)=>{Pe(le),k.value=!1},{immediate:!0})}),me(mo,W),Ea(y(()=>he(h.value,{visible:te.Open,hidden:te.Closed})|r.value)),()=>{let{appear:ee,show:we,enter:le,enterFrom:re,enterTo:ae,entered:ho,leave:yo,leaveFrom:go,leaveTo:R,...N}=e,se={ref:m},ie={...N,...u.value&&c.value&&ft.isServer?{class:B([t.class,N.class,...S,...$])}:{}};return ye({theirProps:ie,ourProps:se,slot:{},slots:n,attrs:t,features:Dn,visible:h.value==="visible",name:"TransitionChild"})}}}),is=vo,Tn=w({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:o,attrs:t,slots:n}){let l=co(),r=y(()=>e.show===null&&l!==null?(l.value&te.Open)===te.Open:e.show);ce(()=>{if(![!0,!1].includes(r.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let a=g(r.value?"visible":"hidden"),s=Vn(()=>{a.value="hidden"}),d=g(!0),f={show:r,appear:y(()=>e.appear||!d.value)};return G(()=>{ce(()=>{d.value=!1,r.value?a.value="visible":It(s)||(a.value="hidden")})}),me(mo,s),me(fo,f),()=>{let m=gn(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),p={unmount:e.unmount};return ye({ourProps:{...p,as:"template"},theirProps:{},slot:{},slots:{...n,default:()=>[Y(is,{onBeforeEnter:()=>o("beforeEnter"),onAfterEnter:()=>o("afterEnter"),onBeforeLeave:()=>o("beforeLeave"),onAfterLeave:()=>o("afterLeave"),...t,...p,...m},n.default)]},attrs:{},features:Dn,visible:a.value==="visible",name:"Transition"})}}});const us=T("div",{class:"fixed inset-0 bg-black-1 bg-opacity-50"},null,-1),ds=w({name:"AppModalBaseBackdrop"}),cs=w({...ds,setup(e){return(o,t)=>(b(),_(C(vo),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:A(()=>[us]),_:1}))}}),ps={class:"flex h-12 w-12 items-center justify-center rounded-full bg-grey-5 lg:h-6 lg:w-6 lg:rounded-none lg:bg-transparent"},fs=w({name:"AppModalBase"}),ms=w({...fs,props:{position:{default:void 0},withCloseCross:{type:Boolean,default:!0},withBackdrop:{type:Boolean,default:!0},openImmediately:{type:Boolean},enter:{default:"duration-300 ease-out"},enterFrom:{default:"opacity-0 scale-95"},enterTo:{default:"opacity-100 scale-100"},leave:{default:"duration-200 ease-in"},leaveFrom:{default:"opacity-100 scale-100"},leaveTo:{default:"opacity-0 scale-95"}},emits:["onClose"],setup(e,{expose:o,emit:t}){const n=e,l=g(n.openImmediately??!1),r=g(),a=g(),s=g(),d=y(()=>{var i;return(i=s.value)==null?void 0:i.$el}),f=lo(),m=t;function p(){l.value=!1,m("onClose")}const c=y(()=>{switch(n.position){case"left":return"justify-start";case"right":return"justify-end";default:return"justify-center"}}),u=y(()=>{var i,v,h;switch(n.position){case"top":return"items-start";case"bottom":return"items-end";default:return(((v=(i=d.value)==null?void 0:i.parentElement)==null?void 0:v.clientHeight)??0)<=(((h=a.value)==null?void 0:h.clientHeight)??0)?"items-center":"items-start"}});return o({openModal:()=>{l.value=!0},closeModal:p,modalContainer:a,modalDialog:d}),(i,v)=>(b(),_(C(Tn),_t({appear:"",show:l.value,as:"template"},{...C(f),class:""}),{default:A(()=>[V(C(Ja),{as:"div",class:"relative z-50",onClose:p},{default:A(()=>[i.withBackdrop?(b(),_(cs,{key:0})):z("",!0),T("div",{ref_key:"modalContainer",ref:a,class:B(["fixed inset-0 ","flex h-dvh w-dvw overflow-auto overflow-x-hidden text-center",c.value,u.value]),"data-test":"modalContainer"},[V(C(vo),{as:"template",enter:i.enter,"enter-from":i.enterFrom,"enter-to":i.enterTo,leave:i.leave,"leave-from":i.leaveFrom,"leave-to":i.leaveTo},{default:A(()=>[V(C(es),{ref_key:"modalDialog",ref:s,class:B(["transform transition-all","h-full w-full overflow-auto bg-white text-left","scrollbar-thin",C(f).class])},{default:A(()=>[T("div",null,[i.withCloseCross?(b(),_(Cl,{key:0,ref_key:"closeCross",ref:r,class:"absolute right-1/2 top-5 translate-x-1/2 lg:right-6 lg:top-6 lg:translate-x-0","link-style":C(Xo).Style6,onClick:v[0]||(v[0]=()=>p())},{default:A(()=>[T("div",ps,[V(wl)])]),_:1},8,["link-style"])):z("",!0),V(C(ts),{as:"h2"},{default:A(()=>[fe(i.$slots,"header")]),_:3}),fe(i.$slots,"default")])]),_:3},8,["class"])]),_:3},8,["enter","enter-from","enter-to","leave","leave-from","leave-to"])],2)]),_:3})]),_:3},16,["show"]))}}),vs={class:"shrink-0 grow px-6 py-4"},hs={class:"mb-8 mt-2"},ys={class:B(["shrink-0 grow-0","sticky bottom-0 left-0 right-0","border-t border-t-blueGrey-5","bg-white"])},gs={class:"mx-6 flex gap-x-3 py-4"},bs=w({name:"PortalTableModalSlider"}),On=w({...bs,props:{title:{},isApplyButtonDisabled:{type:Boolean},isResetButtonDisabled:{type:Boolean}},emits:["apply:click","reset:click"],setup(e,{expose:o,emit:t}){const n=t,l=g(),r=g();return o({openModal:()=>{var a;(a=l.value)==null||a.openModal()},closeModal:()=>{var a;(a=l.value)==null||a.closeModal()},modalContainer:r}),(a,s)=>(b(),_(ms,{ref_key:"modalRef",ref:l,position:"right","enter-from":"opacity-0 translate-x-full","enter-to":"opacity-100 translate-x-0","leave-from":"opacity-100 translate-x-0","leave-to":"opacity-0 translate-x-full","with-backdrop":!1,class:"h-full !w-90 shadow-24"},{default:A(()=>[T("div",{ref_key:"modalContainer",ref:r,class:"flex min-h-full flex-col"},[T("div",vs,[T("h1",hs,ro(a.title),1),fe(a.$slots,"default")]),T("div",ys,[T("div",gs,[V(bo,{size:C(ve).S,text:"Применить","is-disabled":a.isApplyButtonDisabled,class:"grow",onButtonClick:s[0]||(s[0]=()=>n("apply:click"))},null,8,["size","is-disabled"]),V(bo,{size:C(ve).S,text:"Сбросить",color:C(St).Grey,"is-disabled":a.isResetButtonDisabled,class:"grow",onButtonClick:s[1]||(s[1]=()=>n("reset:click"))},null,8,["size","color","is-disabled"])])])],512)]),_:3},512))}}),ws=w({name:"PortalTableSettingSeparator"}),jo=w({...ws,props:{columnSettings:{},columnSettingIndex:{},swipeField:{}},emits:["update:columnSettings"],setup(e,{expose:o,emit:t}){const n=e,l=t,r=g(!1),a=g();return o({checkHover:(f,m,p)=>{if(!(p===n.columnSettingIndex||p===(n.columnSettingIndex??-1)+1)&&a.value&&n.swipeField){const c=a.value.getBoundingClientRect(),u=n.swipeField.getBoundingClientRect(),i={x:c.x-u.x,y:c.y+c.height/2-u.y},v={x:i.x+c.width,y:i.y};r.value=(i.x>=f.x&&i.x<m.x||v.x>=f.x&&v.x<m.x)&&(i.y>=f.y&&i.y<m.y||v.y>=f.y&&v.y<m.y)}},replaceColumnSettingIfHover:f=>{if(r.value){if(r.value=!1,n.columnSettingIndex===f)return;const m=n.columnSettingIndex===void 0?-1:n.columnSettingIndex,p=[...n.columnSettings].sort((u,i)=>u.index-i.index),c=Fn(f,m,p);l("update:columnSettings",n.columnSettings.map(u=>({...u,index:c.findIndex(i=>i.index===u.index)})))}}}),(f,m)=>(b(),D("div",{ref_key:"separator",ref:a,class:B(f.columnSettingIndex!==void 0&&f.columnSettingIndex<f.columnSettings.length-1&&"-mb-px")},[T("div",{class:B(["h-px w-full",r.value?"bg-blue-2":f.columnSettingIndex===void 0?"bg-transparent":"bg-blueGrey-5"])},null,2),T("div",{class:B(["h-px w-full",r.value?"bg-blue-2":"bg-transparent"])},null,2)],2))}}),Cs={class:"overflow-clip"},xs=T("div",{class:"h-full w-full border-b border-b-blueGrey-5 bg-grey-6"},null,-1),Ss=w({name:"PortalTableSettings"}),ks=w({...Ss,props:{tableData:{}},emits:["update:tableData"],setup(e,{expose:o,emit:t}){var W;const n=e,l=t,r=ne(),a=g(),s=y(()=>{var S;return(S=a.value)==null?void 0:S.modalContainer}),d=g(),f=g(),m=y(()=>so(n.tableData.header)),p=y(()=>{var S;return(S=d.value)==null?void 0:S.every($=>!$.isChanged)}),c=g(gt((W=m.value)==null?void 0:W.cells)),u=y(()=>[...c.value].sort((S,$)=>S.index-$.index)),i=S=>{const $=[...c.value],I=$.findIndex(O=>O.index===S.index);$[I]=S,c.value=$},v=()=>{var $,I;let S={...m.value,cells:Ml(c.value,($=m.value)==null?void 0:$.cells)};Nl(S,r),l("update:tableData",{...n.tableData,header:Array.isArray(n.tableData.header)?n.tableData.header.map((O,M)=>M===0?S:O):S}),c.value=gt(S.cells),(I=a.value)==null||I.closeModal()},h=()=>{var S;(S=d.value)==null||S.forEach($=>$.reset())},k=(S,$,I)=>{var O;(O=f.value)==null||O.forEach(M=>M.checkHover(S,$,I))},E=S=>{var $;($=f.value)==null||$.forEach(I=>I.replaceColumnSettingIfHover(S))};return j(m,()=>{var S;c.value=gt((S=m.value)==null?void 0:S.cells)}),o({openModal:()=>{var S;(S=a.value)==null||S.openModal()},closeModal:()=>{var S;(S=a.value)==null||S.closeModal()}}),(S,$)=>(b(),_(On,{ref_key:"modalRef",ref:a,title:"Настройка таблицы","is-apply-button-disabled":p.value,"is-reset-button-disabled":p.value,"onApply:click":v,"onReset:click":h},{default:A(()=>[T("div",Cs,[(b(!0),D(X,null,ke(u.value,(I,O)=>(b(),D(X,{key:`${I.title}-${O}`},[O===0?(b(),_(jo,{key:0,ref_for:!0,ref_key:"columnSettingSeparators",ref:f,"column-settings":c.value,"onUpdate:columnSettings":$[0]||($[0]=M=>c.value=M),"swipe-field":s.value},null,8,["column-settings","swipe-field"])):z("",!0),V(ra,{"swipe-field":s.value,onSwiping:(M,J)=>k(M,J,I.index),"onSwiped:end":()=>E(I.index)},{default:A(({isSwiping:M})=>[T("div",{class:B(["flex flex-col bg-white",M&&"opacity-80"])},[V(ua,{ref_for:!0,ref_key:"portalTableSettingRefs",ref:d,"model-value":I,class:B(M&&"border border-blueGrey-5"),"onUpdate:modelValue":i},null,8,["model-value","class"]),M?z("",!0):(b(),_(jo,{key:0,ref_for:!0,ref_key:"columnSettingSeparators",ref:f,"column-settings":c.value,"onUpdate:columnSettings":$[1]||($[1]=J=>c.value=J),"column-setting-index":I.index,"swipe-field":s.value},null,8,["column-settings","column-setting-index","swipe-field"]))],2)]),stub:A(()=>[xs]),_:2},1032,["swipe-field","onSwiping","onSwiped:end"])],64))),128))])]),_:1},8,["is-apply-button-disabled","is-reset-button-disabled"]))}}),_s={class:"flex items-center gap-x-2"},$s=w({name:"FilterText"}),Es=w({...$s,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=e,n=ne(),l=_e({text:Yt(n,t.columnControl.column)}),a=ze({text:{}},l),s=y(()=>a.value.$error),d=()=>{l.text=Yt(n,t.columnControl.column)},f=()=>l.text=void 0,m=()=>({key:t.columnControl.column,value:l.text}),p=y({get(){return l.text??""},set(c){l.text=c===""?void 0:c}});return o({type:t.columnControl.type,reset:d,validator:a,columnControlIndex:t.columnControlIndex,headerCellIndex:t.headerCellIndex,isError:s,getQueryParam:m,clear:f}),(c,u)=>(b(),D("div",_s,[V(xl,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=i=>p.value=i),size:C(ve).S,placeholder:c.columnControl.placeholder,class:"w-full"},null,8,["modelValue","size","placeholder"])]))}}),Vs=w({name:"TableFilter"}),Ds=w({...Vs,props:{columnControl:{},columnControlIndex:{},headerCellIndex:{}},setup(e,{expose:o}){const t=g(),n=y(()=>{var p;return(p=t.value)==null?void 0:p.type}),l=y(()=>{var p;return(p=t.value)==null?void 0:p.reset}),r=y(()=>{var p;return(p=t.value)==null?void 0:p.clear}),a=y(()=>{var p;return C((p=t.value)==null?void 0:p.validator)}),s=y(()=>{var p;return(p=t.value)==null?void 0:p.columnControlIndex}),d=y(()=>{var p;return(p=t.value)==null?void 0:p.headerCellIndex}),f=y(()=>{var p;return C((p=t.value)==null?void 0:p.isError)}),m=y(()=>{var p;return(p=t.value)==null?void 0:p.getQueryParam});return o({type:n,reset:l,clear:r,validator:a,columnControlIndex:s,headerCellIndex:d,isError:f,getQueryParam:m}),(p,c)=>p.columnControl.type==="filterSelectSwitch"?(b(),_(tn,{key:0,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):p.columnControl.type==="filterMultiSelectSwitch"?(b(),_(un,{key:1,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):p.columnControl.type==="filterNumberRange"?(b(),_(on,{key:2,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):p.columnControl.type==="filterDateRange"?(b(),_(sn,{key:3,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):p.columnControl.type==="filterSelect"?(b(),_(ln,{key:4,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):p.columnControl.type==="filterText"?(b(),_(Es,{key:5,ref_key:"filterRef",ref:t,"column-control":p.columnControl,"column-control-index":p.columnControlIndex,"header-cell-index":p.headerCellIndex},null,8,["column-control","column-control-index","header-cell-index"])):z("",!0)}}),Ts={class:"flex flex-col gap-y-6"},Os={class:"text-size-5 text-grey-1"},Is=w({name:"PortalTableFilterSlider"}),Rs=w({...Is,props:{tableData:{}},setup(e,{expose:o}){const t=e,n=ne(),l=y(()=>so(t.tableData.header)),r=g(),a=g(),s=y(()=>{var c;return((c=r.value)==null?void 0:c.some(u=>C(u.isError)))??!1}),d=y(()=>jl(l.value)),f=()=>{var c,u;(c=r.value)==null||c.forEach(i=>{C(i.validator).$touch()}),s.value||(Ul(n,r.value??[]),(u=a.value)==null||u.closeModal())},m=()=>{var c;(c=r.value)==null||c.forEach(u=>u.reset())};return o({openModal:()=>{var c;(c=a.value)==null||c.openModal()},closeModal:()=>{var c;(c=a.value)==null||c.closeModal()}}),(c,u)=>(b(),_(On,{ref_key:"modalRef",ref:a,title:"Фильтр","onApply:click":f,"onReset:click":m},{default:A(()=>[T("div",Ts,[(b(!0),D(X,null,ke(d.value,({columnControl:i,columnControlIndex:v,headerCellIndex:h,headerTitle:k},E)=>(b(),D("div",{key:E,class:"flex flex-col gap-y-2"},[T("span",Os,ro(k),1),V(Ds,{ref_for:!0,ref_key:"filterRefs",ref:r,"column-control":i,"column-control-index":v,"header-cell-index":h},null,8,["column-control","column-control-index","header-cell-index"])]))),128))])]),_:1},512))}});var Je=(e=>(e.Yes="true",e.No="false",e))(Je||{});const Qo={true:"Есть",false:"Нет"},Fs=e=>Rn.filter(o=>e?e.every(t=>{var r,a;const n=t.key,l=t.value;if(n==="debtSum"&&l instanceof Array){const s=qe(((r=l[0])==null?void 0:r.toString())??""),d=qe(((a=l[1])==null?void 0:a.toString())??"");return(!s||o.debtSum&&o.debtSum>=s)&&(!d||o.debtSum&&o.debtSum<=d)}if(n==="isUserLkpp"&&l)return o.isUserLkpp===(l==="Да");if(n in o){const s=o[n];return l instanceof Array?l.includes(s==null?void 0:s.toString()):l===(s==null?void 0:s.toString())}return!0}):!0),qo=e=>{const o=e==null?void 0:e.map(n=>{const l={cells:[],modifier:{other:n.isDisabled?void 0:"hover:bg-grey-4/20"},actionsSection:{actions:[{icon:U.IconEdit,title:"Редактировать",onIconClick:()=>{}},{icon:n.lockoutEnabled?U.IconLock:U.IconLocked,title:n.lockoutEnabled?"Разблокировать":"Заблокировать",onIconClick:()=>{}}],modifier:{border:["border-l","border-l-blueGrey-5"],padding:["px-3","py-3"],other:["bg-grey-4/20"]}},isDisabled:n.isDisabled};return l.cells.push({type:"link",title:n.name,pattern:"",href:"",linkStyle:Xo.Style10,isDisabled:n.isDisabled,maxLines:3,modifier:{textAlign:"text-left",textColor:n.isDisabled?"text-grey-3":void 0}},...[n.taxIN,n.curatorName].map(r=>({type:"text",text:r.toString(),modifier:{textAlign:"text-left",textColor:n.isDisabled?"text-grey-3":void 0}})),{type:"text",text:n.debtSum?`${n.debtSum} ₽`:"",modifier:{textColor:"text-red-3"}},{type:"icon",icon:n.isUserLkpp?U.IconMark:U.IconNone,size:16,modifier:{textColor:"text-blue-2",other:"mx-auto"}},{type:"texts",spans:[{type:"text",text:n.lastLogin?To(n.lastLogin,"dd.MM.yyyy"):"",modifier:{textColor:"text-black-1"}},{type:"text",text:" "},{type:"text",text:n.lastLogin?To(n.lastLogin,"HH:mm"):"",modifier:{textColor:"text-grey-2"}}],modifier:{textColor:"text-blue-2"}},{type:"icon",icon:n.lockoutEnabled?U.IconLocked:U.IconNone,size:16,modifier:{textColor:"text-blueGrey-2",other:"mx-auto"}}),l.cells.forEach((r,a,s)=>r.modifier={...r.modifier,padding:["py-3",a===s.length-1?"px-3":"px-4"],text:"text-size-6",border:["border-b","border-b-blueGrey-5"]}),l}),t={cells:[{type:"text",text:"Наименование",modifier:{textAlign:"text-left",width:"min-w-28"},controls:[{type:"filterSelect",column:"name",getColumnData:()=>Vl({queryKey:["TEST_NAME"],queryFn:()=>Promise.resolve([{name:"Авдалян Э.А.",code:1},{name:'АНОО "Ольгинская гимназия"',code:2},{name:"Муниципальное образовательное учреждение дополнительного образования детей специализированная детско-юношеская спортивная школа олимпийского резерва по боксу",code:3}]),select:n=>n.map(l=>({title:l.name,value:l.code.toString()}))}),placeholder:"Все"},{type:"sort",column:"name",sortCode:0,onChangeSortOrderHandler:()=>{}}]},{type:"text",text:"ИНН",modifier:{textAlign:"text-left",width:"min-w-32"},controls:[{type:"filterSelectSwitch",column:"taxIN",getColumnData:()=>[{title:"6017011788",value:"6017011788"},{title:"602716854890",value:"602716854890"}],placeholder:"Выберите ИНН"},{type:"sort",column:"taxIN",sortCode:0,onChangeSortOrderHandler:()=>{}}]},{type:"text",text:"Куратор",modifier:{textAlign:"text-left",width:"min-w-40"},controls:[{type:"sort",column:"curatorName",sortCode:0,onChangeSortOrderHandler:()=>{}}]},{type:"text",text:"Задолженность",modifier:{textAlign:"text-left",width:"min-w-32"},controls:[{type:"filterNumberRange",minValueName:"min",maxValueName:"max",measureIconName:U.IconRuble},{type:"sort",column:"debtSum",sortCode:0,onChangeSortOrderHandler:()=>{}}]},{type:"text",text:"Телеметрия",modifier:{textAlign:"text-left",width:"min-w-26"},controls:[{type:"sort",column:"isUserLkpp",sortCode:0,onChangeSortOrderHandler:()=>{}},{type:"filterSelect",column:"isUserLkpp",placeholder:"Все",getColumnData:()=>[{title:Qo[Je.Yes],value:Je.Yes},{title:Qo[Je.No],value:Je.No}]}]},{type:"text",text:"Последний вход",modifier:{width:"min-w-39"}},{type:"icon",icon:U.IconNone,stubText:"Блокировка",modifier:{textAlign:"text-center",width:"min-w-10"}}]};return t.cells.forEach((n,l,r)=>n.modifier={...n.modifier,text:"text-size-6",textColor:"text-grey-1",padding:["pl-4","py-3","pr-3"],border:["border","border-blueGrey-5",l===0?"border-l-0":"border-l",l===r.length-1?"border-r-0":"border-r"],other:["font-medium",l===0?"w-auto":"w-fit","whitespace-nowrap","bg-grey-4/20","max-w-0","hover:bg-grey-5"]}),{header:t,rows:o}},Ps=w({name:"PortalTablePage"}),vi=w({...Ps,setup(e){const o=g(),t=y(()=>{var f;return(f=o.value)==null?void 0:f.queryParams}),n=y(()=>Fs(t.value)),l=g(qo(n.value)),r=g(),a=g(),s=g(),d=g();return j(n,()=>{l.value.rows=qo(n.value).rows}),(f,m)=>(b(),D(X,null,[T("div",{ref_key:"containerRef",ref:a,class:"p-18"},[V(fl,{text:"Фильтры","icon-name":C(U).IconParameters,color:C(St).Blue,class:"mb-5 mr-3",onButtonClick:m[0]||(m[0]=()=>{var p;return(p=d.value)==null?void 0:p.openModal()})},null,8,["icon-name","color"]),V(Mt,{"icon-name":C(U).IconSettings,color:C(St).Grey,class:"mb-5 text-blueGrey-2",onButtonClick:m[1]||(m[1]=()=>{var p;return(p=s.value)==null?void 0:p.openModal()})},null,8,["icon-name","color"]),T("div",{ref_key:"container",ref:r,class:"max-w-360 border border-blueGrey-5"},[V(na,{ref_key:"portalTable",ref:o,modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=p=>l.value=p),"is-loading":!1,"table-container":r.value,"show-no-data-stub":"",class:"overflow-visible"},null,8,["modelValue","table-container"])],512)],512),V(ks,{ref_key:"portalTableSettings",ref:s,"table-data":l.value,"onUpdate:tableData":m[3]||(m[3]=p=>l.value=p)},null,8,["table-data"]),V(Rs,{ref_key:"portalTableFilter",ref:d,"table-data":l.value,"onUpdate:tableData":m[4]||(m[4]=p=>l.value=p)},null,8,["table-data"])],64))}});export{vi as default};
