import{d,G as V,e as m,p as R,O as z,o as c,c as f,b as p,z as M,u as n,n as k,y as T,g as S,f as v,w as _,as as L,at as F,h as P,a as h,af as U,_ as W,F as C,D as B,r as G,I as x,t as A,A as j}from"./app-BJS3HRcf.js";import{_ as K}from"./AppTableData.vue_vue_type_script_setup_true_lang-bR_JiTd9.js";import{_ as q,a as J}from"./models-C4a6qAqm.js";import{_ as Q}from"./BaseSimpleDropDown.vue_vue_type_script_setup_true_lang-Mu0xmkn5.js";import{_ as X}from"./useTableHeaderSticknessStatus-CW3bM2ZN.js";import{c as H}from"./string-IWyLvnMj.js";import{a as Y}from"./compare-CYLiHIG1.js";import"./LinesSkeleton-ChN7oIGA.js";import"./LineSkeleton-jSfKveSg.js";import"./size-CZEB3HWR.js";import"./FlexibleMenu.vue_vue_type_script_setup_true_lang-CXpDXAmR.js";import"./BasePopup.vue_vue_type_script_setup_true_lang-Ci6Wsd6C.js";import"./usePopupInsideContainer-8s8n0Aqa.js";import"./SearchResultSpan.vue_vue_type_script_setup_true_lang-DLEqZUCl.js";import"./AppLink.vue_vue_type_script_setup_true_lang-D_VZ64dX.js";import"./TextButton-B1kOvmUg.js";import"./BaseTag.vue_vue_type_script_setup_true_lang-BOTD6icn.js";import"./BaseInput-Cdvw5_5o.js";import"./InputErrorsList.vue_vue_type_script_setup_true_lang-DaugDlO_.js";import"./InputLabel.vue_vue_type_script_setup_true_lang-C5I-DaOW.js";const Z=d({name:"StickyTableHeaderStub"}),ee=d({...Z,props:{container:{}},setup(a,{expose:e}){const t=a,s=V(),o=m(),r=new ResizeObserver(()=>i()),i=()=>{t.container&&o.value&&(o.value.style.width=`${Math.round(t.container.getBoundingClientRect().right)}px`)};return R(()=>{z(()=>{setTimeout(()=>{i(),t.container&&r.observe(t.container)},0)})}),e({stub:o}),(l,b)=>(c(),f("div",{ref_key:"stub",ref:o,class:k(["fixed left-0 top-0 z-10 bg-white shadow-8",n(s).class])},[p("div",M(n(s),{class:"h-full w-full"}),null,16)],2))}}),te=(a,e)=>{const t=m(!1),s=()=>{var i;const r=n(e);if(r){const l=(i=a.value)==null?void 0:i.getElementsByTagName("thead")[0];l&&(r.style.height=`${l.clientHeight}px`)}else t.value=!1};T(()=>n(e),s);const o=new ResizeObserver(s);return T(()=>n(a),()=>{if(n(a)){o.observe(n(a));return}t.value=!1}),{isHeaderSticky:t,setStubHeight:s}},oe=d({name:"AppTable"}),se=d({...oe,props:{modelValue:{},isLoading:{type:Boolean},loadingConfig:{},showNoDataStub:{type:Boolean},noDataStubTexts:{},noDataStubHeight:{},stickyHeaderStubContainer:{default:()=>document.body}},emits:["update:modelValue"],setup(a,{expose:e,emit:t}){const s=a,o=m(),r=S(()=>{var u;return(u=o.value)==null?void 0:u.tableRef}),i=V(),l=m(),b=S(()=>{var u;return(u=l.value)==null?void 0:u.stub}),{isHeaderSticky:y,setStubHeight:E}=te(r,b),O=t,w=S({get(){return s.modelValue},set(u){O("update:modelValue",u)}});return R(()=>z(()=>setTimeout(E,0))),e({tableRef:r}),(u,g)=>(c(),v(q,L(F(s)),{default:_(()=>{var $;return[n(y)&&(($=u.modelValue)!=null&&$.isHeaderSticky)?(c(),v(ee,{key:0,ref_key:"stickyHeaderStub",ref:l,container:u.stickyHeaderStubContainer,class:"bg-white"},null,8,["container"])):P("",!0),w.value?(c(),v(K,M({key:1,ref_key:"tableDataRef",ref:o,modelValue:w.value,"onUpdate:modelValue":g[0]||(g[0]=I=>w.value=I)},n(i),{"onChange:header":g[1]||(g[1]=I=>y.value=I)}),null,16,["modelValue"])):P("",!0)]}),_:1},16))}}),ae=d({name:"AccordionItemAction"}),D=d({...ae,props:{action:{},isItemHover:{type:Boolean}},setup(a){const e=m();return(t,s)=>(c(),f(C,null,[h(W,{icon:t.action.icon,size:16,class:k([t.action.isActive?"text-blue-2":"text-blueGrey-2",t.isItemHover||t.action.isActive||t.action.isAlwaysVisible?"hover:text-blue-2":"hidden"]),onClick:U(t.action.onIconClick,["stop"]),onMouseenter:s[0]||(s[0]=o=>{var r;return(r=e.value)==null?void 0:r.showPopup(o)}),onMouseleave:s[1]||(s[1]=()=>{var o;return(o=e.value)==null?void 0:o.closePopup()})},null,8,["icon","class","onClick"]),h(X,{ref_key:"popupRef",ref:e,text:t.action.title,class:"w-max"},null,8,["text"])],64))}}),ne={class:"mx-4"},re={class:"mx-4 flex gap-x-3"},ie={class:"w-4"},le=d({name:"AccordionItem"}),ce=d({...le,props:{actions:{},activeArrowOnTitleHover:{type:Boolean,default:!0},isDisabled:{type:Boolean,default:!1}},setup(a){const e=m(!1);return(t,s)=>(c(),f("div",null,[h(Q,{"is-disabled":t.isDisabled},{title:_(({isDropDownShown:o,setDropDownVisibility:r})=>[p("div",{class:"flex items-start justify-between gap-x-10 py-4","data-test":"baseSimpleDropDownTitleSlot",onMouseenter:s[0]||(s[0]=()=>e.value=!0),onMouseleave:s[1]||(s[1]=()=>e.value=!1)},[p("div",ne,[B(t.$slots,"title",{isItemHover:e.value})]),p("div",re,[(c(!0),f(C,null,G(t.actions,(i,l)=>(c(),v(D,{key:l,action:i,"is-item-hover":e.value},null,8,["action","is-item-hover"]))),128)),p("div",ie,[h(D,{action:{icon:o?n(x).IconArrowUpTriangle:n(x).IconArrowDownTriangle,onIconClick:()=>r(!o),isActive:t.activeArrowOnTitleHover?e.value:!1,isAlwaysVisible:!0,title:o?"Свернуть":"Развернуть"},"is-item-hover":e.value},null,8,["action","is-item-hover"])])])],32)]),dropDown:_(()=>[B(t.$slots,"dropDown")]),_:3},8,["is-disabled"])]))}}),ue=["Потребление","Планирование","Взаиморасчеты","Документы","Оборудование","Статистика","Показания ПУ","Паспорта газа","Контакты","Прочее"],de=(a,e)=>H(a.groupDescription,e),pe=(a,e)=>a.some(t=>H(t.group,e)),N=(a,e)=>H(a.description,e),me=(a,e)=>a.some(t=>N(t,n(e))),fe=a=>{const e=new Map;return ue.forEach(t=>{const s=a.filter(o=>o.group===t).sort(Y("description"));s.length>0&&e.set(t,s)}),e},be=(a,e)=>{const t=[],s=de(a,n(e)),o=fe(a.roles??[]);return o==null||o.forEach((r,i)=>{const l=pe(r,n(e));(s||l||me(r,n(e)))&&t.push({cells:[{type:"search",pattern:n(e),text:i,modifier:{border:["border-t","border-b","border-blueGrey-5"],text:"text-size-6",other:"px-4"}}],modifier:{textColor:"text-grey-1",other:["bg-grey-6","font-bold"]}}),r.forEach(b=>{const y=N(b,n(e));(s||l||y)&&t.push({cells:[{type:"search",pattern:n(e),text:b.description,modifier:{border:["border-t","border-b","border-blueGrey-5"],text:"text-size-6",other:"px-4"}}]})})}),{header:[],rows:t}},ve={class:"m-10 flex flex-col"},_e=d({name:"AccordionPage"}),Ge=d({..._e,setup(a){const e=m("");return(t,s)=>(c(),f("div",ve,[(c(!0),f(C,null,G(n(J),(o,r)=>(c(),v(ce,{key:r,actions:[{icon:n(x).IconEdit,isActive:!1,onIconClick:()=>{},title:"Редактировать роль"},{icon:n(x).IconWasteBin,isActive:!1,onIconClick:()=>{},title:"Удалить роль"}]},{title:_(({isItemHover:i})=>[p("h4",{class:k(["inline-block max-w-144",i?"text-blue-2":"text-black-1"])},A(o.groupDescription),3),j(" "+A(" ")+" "),p("h4",{class:k(["inline-block max-w-144",i?"text-blue-2":"text-blueGrey-2"])}," ("+A(o.groupName)+") ",3)]),dropDown:_(()=>[h(se,{"model-value":n(be)(o,e.value),"is-loading":!1,class:"mb-5"},null,8,["model-value"])]),_:2},1032,["actions"]))),128))]))}});export{Ge as default};
